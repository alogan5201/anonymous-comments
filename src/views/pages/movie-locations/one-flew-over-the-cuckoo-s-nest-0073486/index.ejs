<!DOCTYPE html>
<html lang="en" dir="ltr">
<%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>

  <body class="film-location">
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->

    <noscript>
      <h3>Please enable JavaScript in order to view this site properly.</h3>
    </noscript>

    <%- include(`${partials}/nav`); -%>

     <main class="mb-4 mt-5">



        <div class="container px-4 px-lg-5">


            <div class="row align-items-md-stretch">
                
              <div class="col-md-12">

                <div class="card mb-3" id="film-details">
                  <div class="row g-0">
                    <div class="col-md-8 px-3 py-3">
                      <div class="card-body">
                      <h3 class="card-title">One Flew Over the Cuckoo's Nest</h3>
          <p class="card-text mb-0">


  <span > A criminal pleads insanity and is admitted to a mental institution, where he rebels against the oppressive nurse and rallies up the scared patients.  </span>
                          <span > McMurphy has a criminal past and has once again gotten himself into trouble and is sentenced by the court. To escape labor duties in prison, McMurphy pleads insanity and is sent to a ward for the mentally unstable. Once here, McMurphy both endures and stands witness to the abuse and degradation of the oppressive Nurse Ratched, who gains superiority and power through the flaws of the other inmates. McMurphy and the other inmates band together to make a rebellious stance against the atrocious Nurse. -Jacob Oberfrank.  </span>
                          <span > 1963. With a few months left in his sentence, thirty-eight year old convict Randall Patrick McMurphy - "Mac" - serving time for several assaults and statutory rape, has just been transferred from a labor camp associated with Eastern Oregon Correctional Institution in Pendleton to a psychiatric hospital. Mac has been able to use acting "crazy" - having a belligerent and smart-alecky attitude and anti-authoritarian behavior - to his benefit in not having to do any work. He is at the hospital as the authorities at Pendleton want him to undergo a psychiatric evaluation to prove he is not crazy, believing this is all an act to get out of work. He believes this stint will get him out of any more work while he serves out the remainder of his sentence. He is placed in a ward with a group of men who have differing degrees of lucidity and control of their mental faculties. He continues to behave in the same manner as always to get what he wants, using the other patients either as accessories or things for his own amusement. He adds to his list of goals to do anything to annoy the ward's tyrannical head nurse, Miss Mildred Ratched, whose seeming want is to break the spirit of any of the men in her care. In his battle with Nurse Ratched, Mac eventually tries to help the men get a voice of their own while in the hospital, and for some for their eventual return to the outside world. -Huggo.  </span>
                          
                <div class="collapse" id="myCollapsible">
                    <div id = "module">



                    </div>
<span class="additional-information" > R.P McMurphy, a convict serving time for statutory rape, pleads insanity to avoid labour duties in prison. Believing its all an act, the authorities send him to a mental institution where he will forego psychiatric evaluation. Whilst there, McMurphy attempts to liven up the patients and starts an uprising against the tyrannical head nurse - Mildred Ratched. -BecksyKane.  </span>
    <span class="additional-information" > McMurphy thinks he can get out of doing work while in prison by pretending to be mad. His plan backfires when he is sent to a mental asylum. He tries to liven the place up a bit by playing card games and basketball with his fellow inmates, but the head nurse is after him at every turn. -Colin Tinto .  </span>
    <span class="additional-information" > McMurphy, a man with several assault convictions to his name, finds himself in jail once again. This time, the charge is statutory rape when it turns out that his girlfriend had lied about being eighteen, and was, in fact, fifteen (or, as McMurphy puts it, "fifteen going on thirty-five"). Rather than spend his time in jail, he convinces the guards that he's crazy enough to need psychiatric care and is sent to a hospital. He fits in frighteningly well, and his different point of view actually begins to cause some of the patients to progress. Nurse Ratched becomes his personal cross to bear as his resistance to the hospital routine gets on her nerves. -John Vogel . and J.D.  </span>
    </div>
                
<p>
  <a class="btn btn-link show-more-less collapsed" data-bs-toggle="collapse" href="#myCollapsible" role="button" aria-expanded="false" aria-controls="myCollapsible">

  </a>

</p>

              

                        </p>
                      </div>
                    </div>
                      <div class="col-md-4 justify-self-end">
                      <img
                                      src="https://m.media-amazon.com/images/M/MV5BZjA0OWVhOTAtYWQxNi00YzNhLWI4ZjYtNjFjZTEyYjJlNDVlL2ltYWdlL2ltYWdlXkEyXkFqcGdeQXVyMTQxNzMzNDI@.jpg"
                                      class="img-fluid rounded-start"
                                      alt="One Flew Over the Cuckoo's Nest"
                                    />
                    </div>
                     </div>
                </div>
              </div>
            </div>
          
            <div class="col-lg-12">
  <div class="map-container">
                  <div id="map"></div>
                  <div id="loader">
                    <div class="spinner-border" role="status">
                      <span class="sr-only d-none">Loading...</span>
                    </div>
                  </div>
                </div>

            </div>

 <table class="table">
          <tr class="table__header">

            <th class="table__cell">Location</th>
           <th class="table__cell">Coordiantes</th>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Salem, Oregon, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">44.9392</span>, <span class="lon">-123.0331</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Depoe Bay, 76 S Highway 101, Depoe Bay, Oregon 97341, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">44.811549</span>, <span class="lon">-124.0623585</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Fort Bragg, California, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">39.4457</span>, <span class="lon">-123.8053</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Salem, Oregon, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">44.9392</span>, <span class="lon">-123.0331</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Oregon, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">44.0328841608</span>, <span class="lon">-120.281411696945</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">California, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">37.0743595873</span>, <span class="lon">-119.699375153073</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">39.3812661305678</span>, <span class="lon">-97.9222112121185</span></a>
                
            </td>
          </tr>
          </tr>

        </table>
          </div>
        </div>


    </main>



     <%- include(`${partials}/footer`); -%> <%-include(`${partials}/homeScripts`); -%>

  <script type="text/javascript">

var locations =[{"bbox": null, "data": [{"lat": 44.9392, "lon": -123.0331, "name": "Salem, Oregon, United States"}, {"lat": 44.811549, "lon": -124.0623585, "name": "Depoe Bay, 76 S Highway 101, Depoe Bay, Oregon 97341, United States"}, {"lat": 39.4457, "lon": -123.8053, "name": "Fort Bragg, California, United States"}, {"lat": 44.9392, "lon": -123.0331, "name": "Salem, Oregon, United States"}, {"lat": 44.0328841608, "lon": -120.281411696945, "name": "Oregon, United States"}, {"lat": 37.0743595873, "lon": -119.699375153073, "name": "California, United States"}, {"lat": 39.3812661305678, "lon": -97.9222112121185, "name": "United States"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
    //console.log($(`${target} span`).first())

   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
</script>
  </body>
</html>