<!DOCTYPE html>
<html lang="en" dir="ltr">
<%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>

  <body class="film-location">
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->

    <noscript>
      <h3>Please enable JavaScript in order to view this site properly.</h3>
    </noscript>

    <%- include(`${partials}/nav`); -%>

     <main class="mb-4 mt-5">



        <div class="container px-4 px-lg-5">


            <div class="row align-items-md-stretch">
                
              <div class="col-md-12">

                <div class="card mb-3" id="film-details">
                  <div class="row g-0">
                    <div class="col-md-8 px-3 py-3">
                      <div class="card-body">
                      <h3 class="card-title">Wild Strawberries</h3>
          <p class="card-text mb-0">


  <span > After living a life marked by coldness, an aging professor is forced to confront the emptiness of his existence.  </span>
                          <span > With the exception of his elderly housekeeper Miss Agda who he treats almost like a surrogate platonic wife, widowed seventy-eight year old Dr. Isak Borg, a former medical doctor and professor, has retreated from any human contact, partly his own want but partly the decision of others who do not want to spend time with him because of his cold demeanor. He is traveling from his home in Stockholm to Lund to accept an honorary degree. Instead of flying as was the original plan, he decides to take the day long drive instead. Along for the ride is his daughter-in-law Marianne, who had been staying with him for the month but has now decided to go home. The many stops and encounters along the way make him reminisce about various parts of his life. Those stops which make him reminisce directly are at his childhood summer home, at the home of his equally emotionally cold mother, and at a gas station where the attendants praise him as a man for his work. But the lives of other people they encounter almost mirror his own, including hitchhikers Sara, Viktor and Anders - who remind him of his cousin Sara who he was going to marry, himself and his irresponsible brother Sigfrid who Sara eventually married - a bickering married couple Sten and Berit Alman, and Marianne and her husband and Isak's son Evald, whose marriage is as strained as was his own. -Huggo.  </span>
                          <span > Dr. Isak Borg, now 78 years old, is traveling by car to Lund to receive an honorary degree at Lund cathedral. He's traveling with his daughter-in-law Marianne, who is married to his son Evald. Isak now lives a lonely life which, by his own admission, is partly his own fault having consciously withdrawn from most social interaction. Along the way he stops at his family's summer home where he spent time during the first 20 years of his life. It's the place where the wild strawberries grow and he recalls his beautiful cousin Sara to whom he was secretly engaged until his brother Sigfrid snatches her away. They give a ride to several people along the way including a girl - also named Sara - and her two friends along with a married couple who almost ran them off the road. Borg's reminiscences and disturbing dreams add to his melancholy as he questions some of the decisions he has made in his life. -garykmcd.  </span>
                          
                <div class="collapse" id="myCollapsible">
                    <div id = "module">



                    </div>
<span class="additional-information" > Dr. Isak Borg, 78, is a renowned physician and researcher. His life's experiences have left him cold, distant and uncaring. Now he is traveling to be awarded an honorary degree by a university, a reward for his life's work. Driving with his daughter-in-law Marianne, currently estranged from his son Ewald (whose personality seems to be following that of his father's), he finds himself reminiscing about his past, especially his 20s. He has also been having strange dreams, dreams that remind him of the person he has become, and potentially what lies ahead for him. -grantss.  </span>
    <span class="additional-information" > Professor of medicine Isak Borg travels to Lund University in order to receive his anniversary title. Along the road he meets strangers and relatives, and in his dreams he is confronted with his own past as well as fear of insufficiency. -Anders Andersson .  </span>
    <span class="additional-information" > Explores the disillusionment of an elderly physician, Professor Isak Borg, as he reflects upon his life and begins to perceive his mortality. As he travels to Lund to receive an honorary award after 50 years of medical practice, he finds himself repeatedly affected by intrusive dreams and hallucinations that expose his darkest fears. He slowly comes to realize that the choices he made in the past have created a cold and empty life, devoid of real meaning or value. Finally, he achieves redemption and reintegration through forgiveness and the love of his family. -Tad Dibbern .  </span>
    </div>
                
<p>
  <a class="btn btn-link show-more-less collapsed" data-bs-toggle="collapse" href="#myCollapsible" role="button" aria-expanded="false" aria-controls="myCollapsible">

  </a>

</p>

              

                        </p>
                      </div>
                    </div>
                      <div class="col-md-4 justify-self-end">
                      <img
                                      src="https://m.media-amazon.com/images/M/MV5BYWQxYzdhMDMtNjAyZC00NzE0LWFjYmQtYjk0YzMyYjA5NzZkXkEyXkFqcGdeQXVyMjUzOTY1NTc@.jpg"
                                      class="img-fluid rounded-start"
                                      alt="Wild Strawberries"
                                    />
                    </div>
                     </div>
                </div>
              </div>
            </div>
          
            <div class="col-lg-12">
  <div class="map-container">
                  <div id="map"></div>
                  <div id="loader">
                    <div class="spinner-border" role="status">
                      <span class="sr-only d-none">Loading...</span>
                    </div>
                  </div>
                </div>

            </div>

 <table class="table">
          <tr class="table__header">

            <th class="table__cell">Location</th>
           <th class="table__cell">Coordiantes</th>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Dalarö, Stockholm, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">59.13194</span>, <span class="lon">18.40333</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Gotland, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">57.49917</span>, <span class="lon">18.50944</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Lund, Skåne, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">55.7</span>, <span class="lon">13.2</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Filmstaden Råsunda, Greta garbos väg 11,13, Solna, Stockholm 169 40, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">59.367224</span>, <span class="lon">17.981759</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Vätternvägen, 546 32 Karlsborg, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">58.5400486577074</span>, <span class="lon">14.5083103858462</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Långö, 611 99 Tystberga, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">58.7549369540164</span>, <span class="lon">17.4734439860543</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Katedralskolan, Stora Södergatan 22, Lund, Skåne 222 24, Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">55.70018875</span>, <span class="lon">13.19002675</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Sweden </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">64.9648751621697</span>, <span class="lon">17.6754094331351</span></a>
                
            </td>
          </tr>
          </tr>

        </table>
          </div>
        </div>


    </main>



     <%- include(`${partials}/footer`); -%> <%-include(`${partials}/homeScripts`); -%>

  <script type="text/javascript">

var locations =[{"bbox": null, "data": [{"lat": 59.13194, "lon": 18.40333, "name": "Dalar\u00f6, Stockholm, Sweden"}, {"lat": 57.49917, "lon": 18.50944, "name": "Gotland, Sweden"}, {"lat": 55.7, "lon": 13.2, "name": "Lund, Sk\u00e5ne, Sweden"}, {"lat": 59.367224, "lon": 17.981759, "name": "Filmstaden R\u00e5sunda, Greta garbos v\u00e4g 11,13, Solna, Stockholm 169 40, Sweden"}, {"lat": 58.5400486577074, "lon": 14.5083103858462, "name": "V\u00e4tternv\u00e4gen, 546 32 Karlsborg, Sweden"}, {"lat": 58.7549369540164, "lon": 17.4734439860543, "name": "L\u00e5ng\u00f6, 611 99 Tystberga, Sweden"}, {"lat": 55.70018875, "lon": 13.19002675, "name": "Katedralskolan, Stora S\u00f6dergatan 22, Lund, Sk\u00e5ne 222 24, Sweden"}, {"lat": 64.9648751621697, "lon": 17.6754094331351, "name": "Sweden"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
    //console.log($(`${target} span`).first())

   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
</script>
  </body>
</html>