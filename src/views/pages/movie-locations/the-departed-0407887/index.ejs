<!DOCTYPE html>
<html lang="en" dir="ltr">
<%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>

  <body class="film-location">
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->

    <noscript>
      <h3>Please enable JavaScript in order to view this site properly.</h3>
    </noscript>

    <%- include(`${partials}/nav`); -%>

     <main class="mb-4 mt-5">



        <div class="container px-4 px-lg-5">


            <div class="row align-items-md-stretch">
                
              <div class="col-md-12">

                <div class="card mb-3" id="film-details">
                  <div class="row g-0">
                    <div class="col-md-8 px-3 py-3">
                      <div class="card-body">
                      <h3 class="card-title">The Departed</h3>
          <p class="card-text mb-0">


  <span > An undercover cop and a mole in the police attempt to identify each other while infiltrating an Irish gang in South Boston.  </span>
                          <span > In this crime-action tour de force, the South Boston state police force is waging war on Irish-American organized crime. Young undercover cop Billy Costigan is assigned to infiltrate the mob syndicate run by gangland chief Frank Costello. While Billy quickly gains Costello's confidence, Colin Sullivan, a hardened young criminal who has infiltrated the state police as an informer for the syndicate is rising to a position of power in the Special Investigation Unit. Each man becomes deeply consumed by their double lives, gathering information about the plans and counter-plans of the operations they have penetrated. But when it becomes clear to both the mob and the police that there is a mole in their midst, Billy and Colin are suddenly in danger of being caught and exposed to the enemy - and each must race to uncover the identity of the other man in time to save themselves. But is either willing to turn on their friends and comrades they've made during their long stints undercover? -Anonymous.  </span>
                          <span > Two just-graduated officers from Massachusetts State Police Academy follow opposite sides of the law: Billy Costigan is assigned to work undercover with the Irish mobster Frank Costello to get evidence to arrest him. His true identity is known only by his superiors Dignam and Oliver Queenan. The protégé of Costello, Colin Sullivan, is promoted in the Massachusetts State Police and is the informer of Costello. Each police officer gives his best effort trying to disclose the identity of the other "rat." -Claudio Carvalho, Rio de Janeiro, Brazil.  </span>
                          
                <div class="collapse" id="myCollapsible">
                    <div id = "module">



                    </div>
<span class="additional-information" > A tale of two cops, though on different sides of the law. Colin Sullivan (played by Matt Damon) is a Massachusetts State police detective. He has risen through the ranks to head up a special department. Public Enemy Number 1 is Frank Costello (Jack Nicholson), a crime network kingpin, and Sullivan's main target. However, Sullivan is a paid informant for Costello, giving him tip-offs on police raids and other useful information. Meanwhile, Billy Costigan (Leonardo DiCaprio) works for Costello. However, he is actually an undercover policeman, spying on Costello. In due course, both know that there is a rat in their organization, but don't know their identity. A deadly cat-and-mouse game ensues, with both trying to uncover the other without being discovered themselves. -grantss.  </span>
    <span class="additional-information" > The young police officer, Billy Costigan, risks his morals and sanity to infiltrate the American-Irish gang of the local mob boss, Frank Costello. As Billy gains Costello's trust, the Massachusetts State police detective, Colin Sullivan, becomes Costello's paid informant. And more and more, each man immerses himself deeply in his double life, gathering information about each side's plans and operations. But, when it becomes clear that there is a mole in their midst, suddenly, both impostors realise that this volatile situation could blow their cover, setting in motion a frenzied race against time to expose the other's identity to save their skin. -Nick Riganas.  </span>
    <span class="additional-information" > Years ago, a powerful Irish mafia figure placed a small selection of his youngest, brightest men into the Massachusetts State Police Academy as cadets. Their purpose is to eventually rise within the prestigious ranks of the state police department, to serve as the eyes and ears of their boss. While somewhere else, a young cadet was assigned with an equally dangerous task: infiltrate the Irish syndicate headed by the man sending in his own to the Massachusetts State Police. Now, one cadet is an up and coming police official with a torn allegiance to his job and to the criminal mastermind that put him there. While the other cadet is the trusted number two of that man, only finding his professional duties are becoming blurred with his current state. But new clues have lead to unfortunate discoveries, when both sides realize they're being watched by the enemy. -mystic80.  </span>
    </div>
                
<p>
  <a class="btn btn-link show-more-less collapsed" data-bs-toggle="collapse" href="#myCollapsible" role="button" aria-expanded="false" aria-controls="myCollapsible">

  </a>

</p>

              

                        </p>
                      </div>
                    </div>
                      <div class="col-md-4 justify-self-end">
                      <img
                                      src="https://m.media-amazon.com/images/M/MV5BMTI1MTY2OTIxNV5BMl5BanBnXkFtZTYwNjQ4NjY3.jpg"
                                      class="img-fluid rounded-start"
                                      alt="The Departed"
                                    />
                    </div>
                     </div>
                </div>
              </div>
            </div>
          
            <div class="col-lg-12">
  <div class="map-container">
                  <div id="map"></div>
                  <div id="loader">
                    <div class="spinner-border" role="status">
                      <span class="sr-only d-none">Loading...</span>
                    </div>
                  </div>
                </div>

            </div>

 <table class="table">
          <tr class="table__header">

            <th class="table__cell">Location</th>
           <th class="table__cell">Coordiantes</th>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">SUNY Maritime College, 6 Pennyfield Ave, New York, New York 10465, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.8074035</span>, <span class="lon">-73.796796</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Charlestown, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.392176</span>, <span class="lon">-71.069825</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Chinatown, Boston, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.3499</span>, <span class="lon">-71.0644</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Lynn, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.4668</span>, <span class="lon">-70.9495</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">White Plains, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">41.034</span>, <span class="lon">-73.7629</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Quincy, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.2529</span>, <span class="lon">-71.0023</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Brooklyn Heights, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.6977</span>, <span class="lon">-73.9943</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Gerritsen Beach, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.5929</span>, <span class="lon">-73.9257</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Quincy, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.2529</span>, <span class="lon">-71.0023</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">25 Staniford Street, Boston, Massachusetts 02114, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.36213</span>, <span class="lon">-71.0635</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Greenpoint, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.7237</span>, <span class="lon">-73.951</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Boston, Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.3605</span>, <span class="lon">-71.0596</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Bronx, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.8501</span>, <span class="lon">-73.8662</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Brooklyn, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.6501</span>, <span class="lon">-73.9496</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Sunset Park, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.6455</span>, <span class="lon">-74.0124</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">12 Farnsworth Street, Boston, Massachusetts 02210, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.35138</span>, <span class="lon">-71.048805</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">180 Prince Street, Queens, New York 11354, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.761555</span>, <span class="lon">-73.832934</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Dorchester Street, Quincy, Massachusetts 02171, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.300105</span>, <span class="lon">-71.014535</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Marriott Vacation Club Pulse, 33 West 37th Street, New York, New York 10018, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.751296</span>, <span class="lon">-73.984819</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Massachusetts, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">42.3204700602</span>, <span class="lon">-71.9603257607071</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.7306</span>, <span class="lon">-73.9866</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">39.3812661305678</span>, <span class="lon">-97.9222112121185</span></a>
                
            </td>
          </tr>
          </tr>

        </table>
          </div>
        </div>


    </main>



     <%- include(`${partials}/footer`); -%> <%-include(`${partials}/homeScripts`); -%>

  <script type="text/javascript">

var locations =[{"bbox": [[40.5929, -73.9257], [40.6455, -74.0124], [40.6501, -73.9496]], "data": [{"lat": 40.8074035, "lon": -73.796796, "name": "SUNY Maritime College, 6 Pennyfield Ave, New York, New York 10465, United States"}, {"lat": 42.392176, "lon": -71.069825, "name": "Charlestown, Massachusetts, United States"}, {"lat": 42.3499, "lon": -71.0644, "name": "Chinatown, Boston, Massachusetts, United States"}, {"lat": 42.4668, "lon": -70.9495, "name": "Lynn, Massachusetts, United States"}, {"lat": 41.034, "lon": -73.7629, "name": "White Plains, New York, United States"}, {"lat": 42.2529, "lon": -71.0023, "name": "Quincy, Massachusetts, United States"}, {"lat": 40.6977, "lon": -73.9943, "name": "Brooklyn Heights, New York, New York, United States"}, {"lat": 40.5929, "lon": -73.9257, "name": "Gerritsen Beach, New York, New York, United States"}, {"lat": 42.2529, "lon": -71.0023, "name": "Quincy, Massachusetts, United States"}, {"lat": 42.36213, "lon": -71.0635, "name": "25 Staniford Street, Boston, Massachusetts 02114, United States"}, {"lat": 40.7237, "lon": -73.951, "name": "Greenpoint, New York, New York, United States"}, {"lat": 42.3605, "lon": -71.0596, "name": "Boston, Massachusetts, United States"}, {"lat": 40.8501, "lon": -73.8662, "name": "Bronx, New York, United States"}, {"lat": 40.6501, "lon": -73.9496, "name": "Brooklyn, New York, United States"}, {"lat": 40.6455, "lon": -74.0124, "name": "Sunset Park, New York, New York, United States"}, {"lat": 42.35138, "lon": -71.048805, "name": "12 Farnsworth Street, Boston, Massachusetts 02210, United States"}, {"lat": 40.761555, "lon": -73.832934, "name": "180 Prince Street, Queens, New York 11354, United States"}, {"lat": 42.300105, "lon": -71.014535, "name": "Dorchester Street, Quincy, Massachusetts 02171, United States"}, {"lat": 40.751296, "lon": -73.984819, "name": "Marriott Vacation Club Pulse, 33 West 37th Street, New York, New York 10018, United States"}, {"lat": 42.3204700602, "lon": -71.9603257607071, "name": "Massachusetts, United States"}, {"lat": 40.7306, "lon": -73.9866, "name": "New York, New York, United States"}, {"lat": 39.3812661305678, "lon": -97.9222112121185, "name": "United States"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
    //console.log($(`${target} span`).first())

   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
</script>
  </body>
</html>