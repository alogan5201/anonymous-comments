<!DOCTYPE html>
<html lang="en" dir="ltr">
    <%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>
    <body class="film-location film-details">
        <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
<![endif]-->
        <noscript>
            <h3>Please enable JavaScript in order to view this site properly.</h3>
        </noscript>
        <%- include(`${partials}/nav`); -%>
        <main class="mb-4 mt-5">
            <div class="container px-4 px-lg-5">
                <%- include(`${partials}/autocomplete`); -%>
                <div class="row align-items-md-stretch">
                    <div class="col-md-12">
                        <div class="card mb-3" id="film-details">
                            <div class="row g-0">
                                <div class="col-md-8 px-3 py-3">
                                    <div class="card-body">
                                        <h3 class="card-title">Pulp Fiction</h3>
                                        <p class="card-text mb-0">
                                            <span id="mainPlotContent"> The lives of two mob hitmen, a boxer, a gangster and his wife, and a pair of diner bandits intertwine in four tales of violence and redemption. Jules Winnfield (Samuel L. Jackson) and Vincent Vega (John Travolta) are two hit men who are out to retrieve a suitcase stolen from their employer, mob boss Marsellus Wallace (Ving Rhames). Wallace has also asked Vincent to take his wife Mia (Uma Thurman) out a few days later when Wallace himself will be out of town. Butch Coolidge (Bruce Willis) is an aging boxer who is paid by Wallace to lose his fight. The lives of these seemingly unrelated people are woven together comprising of a series of funny, bizarre and uncalled-for incidents. Soumitra Faced with life's cruel irony, the unpredictable stori... </span>
                                                
                                                    <div class="collapse" id="movieLocationCollapsible">
                                                        <span id="metaPlotContent"class="additional-information"> es of a well-dressed pair of low-level hitmen; a gangster's statuesque moll, and a double-crossing prizefighter become inextricably intertwined, as the small-time crooks, Honey Bunny and Pumpkin, summon up the courage to hold up their favourite L.A. diner. Entrusted with retrieving a glow-emitting leather suitcase which belongs to their boss--the powerful crime kingpin, Marsellus--instead, the dark-suited gunmen, Vincent Vega and Jules Winnfield, end up with a bloody mess. Fortunately--with men like Mr Wolf always around to handle a crisis--there's time to cool off in a long twist contest, while at the same time, the proud champion boxer, Butch, makes the decision of a lifetime. Soon, things will come full circle, as, once more, Jules and Vincent find themselves in the perfect dead-end situation, exactly where it all began: an all-too-familiar cafeteria. Is truth stranger than fiction? Nick Riganas Pumpkin (Tim Roth) and Honey Bunny (Amanda Plummer) are two thieves who, while dining at a coffee shop, decide that the best thing to do is to rob it. Vincent Vega (John Travolta) and Jules Winnfield (Samuel L. Jackson), two hit men working for mob kingpin Marcellus Wallace (Ving Rhames'), are sent to retrieve a very special and very mysterious briefcase for their boss. Vincent later must also show Mrs. Wallace (Uma Thurman) a good time while her husband is out. Butch Coolidge (Bruce Willis) is an aging prizefighter who is being paid to  take a dive , but instead accidentally kills his opponent, and tries to flee town, but not before getting his dead father's lucky golden watch. These four seemingly unrelated stories are interwoven in a non-linear fashion. movies_are_forever Jules Winnfield (Samuel L. Jackson) and Vincent Vega (John Travolta) work as hit men for crime boss Marcellus Wallace (Ving Rhames). Wallace is currently dealing with Butch Collidge (Bruce Willis), a boxer who failed to throw a fight after taking Wallace's money and is now planning to flee the city, but can't leave his father's watch behind. Vincent faces some problems of his own when Wallace asks him to show his wife Mia (Uma Thurman) a good time while he's away. Some of these people redeem themselves and some don't, and all meet an end appropriate to their choices. rmlohner Vincent Vega (John Travolta) and Jules Winnfield (Samuel L. Jackson) are two hit men on the hunt for a briefcase whose contents were stolen from their boss, Marsellus Wallace (Ving Rhames). They run into a few unexpected detours along the road. Marsellus is out of town, and he's gotten Vincent to take care of his wife, Mia (Uma Thurman. That is, take her out for a night on the town. Things go smoothly until one of them makes a huge error. Butch Coolidge (Bruce Willis) is a boxer who's been approached by Marsellus and been told to throw his latest fight. When Butch ends up killing the other boxer, he must escape Marsellus. Pumpkin (Tim Roth) and Honey Bunny (Amanda Plummer) (not their real names) are two lovebirds/thieves who have decided to rob the restaurant they're currently eating at. But the restaurant doesn't turn out to be as easy as the other places they've robbed. G-reaper </span>
                                                    </div>
                                                    <p>
                                                        <a class="btn btn-link show-more-less collapsed"
                                                           id="myCollapsibleBtn"
                                                           role="button"></a>
                                                    </p>
                                                
                                            </p>
                                    </div>
                                </div>
                                <div class="col-md-4 justify-self-end">
                                        <img src="https://m.media-amazon.com/images/M/MV5BNGNhMDIzZTUtNTBlZi00MTRlLWFjM2ItYzViMjE3YzI5MjljXkEyXkFqcGdeQXVyNzkwMjQ5NzM@.jpg"
                                             class="img-fluid rounded-start"
                                             alt="Pulp Fiction"/>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="map-container">
                        <div id="map"></div>
                        <div id="loader">
                            <div class="spinner-border" role="status">
                                <span class="sr-only d-none">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table">
                    <tr class="table__header">
                        <th class="table__cell">Location</th>
                        <th class="table__cell">Coordiantes</th>
                    </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">1435 Flower Street, Glendale, California 91201, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.162815</span>, <span class="lon">-118.290295</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">20933 Roscoe Boulevard, Canoga Park, California 91304, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.2201</span>, <span class="lon">-118.58966</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Hawthorne, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">33.918859</span>, <span class="lon">-118.348326</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">3519 La Clede Avenue, Los Angeles, California 90039, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.11957</span>, <span class="lon">-118.25725</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">5800 Harold Way, Los Angeles, California 90028, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.099005</span>, <span class="lon">-118.31612</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Sun Valley, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.217504</span>, <span class="lon">-118.370358</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Los Angeles, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.053691</span>, <span class="lon">-118.242766</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">11827 Valerio Street, North Hollywood, California 91605, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.205015</span>, <span class="lon">-118.391265</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Atwater Avenue and North Fletcher Drive, Los Angeles, California 90065, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.11109</span>, <span class="lon">-118.2505362</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">11813 Runnymede Street, North Hollywood, California 91605, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.20623</span>, <span class="lon">-118.39103</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">4149 Kraft Avenue, Studio City, California 91604, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.14396</span>, <span class="lon">-118.38038</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Pasadena, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.147645</span>, <span class="lon">-118.144478</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">129 North Raymond Avenue, Pasadena, California 91103, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.14816</span>, <span class="lon">-118.1491</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Hawthorne, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">33.918859</span>, <span class="lon">-118.348326</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">1541 Summitridge Drive, Beverly Hills, California 90210, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.09913</span>, <span class="lon">-118.42081</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Riverside Drive and North Glendale Boulevard, Los Angeles, California 90039, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.111023</span>, <span class="lon">-118.2649618</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Beverly Hills, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.06965</span>, <span class="lon">-118.396306</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">North Hollywood, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.172904</span>, <span class="lon">-118.374037</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Los Angeles, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.053691</span>, <span class="lon">-118.242766</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">2760 Fletcher Drive, Los Angeles, California 90039, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.11118</span>, <span class="lon">-118.25012</span></a>
                            </td>
                        </tr>
                    </table>
            </div>
        </main>
        <%- include(`${partials}/footer`); -%> <%- include(`${partials}/page-scripts/movie-location-scripts`); -%>
        <script type="text/javascript">
var locations =[{"bbox": [[33.918859, -118.348326], [33.918859, -118.348326], [34.053691, -118.242766]], "data": [{"lat": 34.162815, "lon": -118.290295, "name": "1435 Flower Street, Glendale, California 91201, United States"}, {"lat": 34.2201, "lon": -118.58966, "name": "20933 Roscoe Boulevard, Canoga Park, California 91304, United States"}, {"lat": 33.918859, "lon": -118.348326, "name": "Hawthorne, California, United States"}, {"lat": 34.11957, "lon": -118.25725, "name": "3519 La Clede Avenue, Los Angeles, California 90039, United States"}, {"lat": 34.099005, "lon": -118.31612, "name": "5800 Harold Way, Los Angeles, California 90028, United States"}, {"lat": 34.217504, "lon": -118.370358, "name": "Sun Valley, California, United States"}, {"lat": 34.053691, "lon": -118.242766, "name": "Los Angeles, California, United States"}, {"lat": 34.205015, "lon": -118.391265, "name": "11827 Valerio Street, North Hollywood, California 91605, United States"}, {"lat": 34.11109, "lon": -118.2505362, "name": "Atwater Avenue and North Fletcher Drive, Los Angeles, California 90065, United States"}, {"lat": 34.20623, "lon": -118.39103, "name": "11813 Runnymede Street, North Hollywood, California 91605, United States"}, {"lat": 34.14396, "lon": -118.38038, "name": "4149 Kraft Avenue, Studio City, California 91604, United States"}, {"lat": 34.147645, "lon": -118.144478, "name": "Pasadena, California, United States"}, {"lat": 34.14816, "lon": -118.1491, "name": "129 North Raymond Avenue, Pasadena, California 91103, United States"}, {"lat": 33.918859, "lon": -118.348326, "name": "Hawthorne, California, United States"}, {"lat": 34.09913, "lon": -118.42081, "name": "1541 Summitridge Drive, Beverly Hills, California 90210, United States"}, {"lat": 34.111023, "lon": -118.2649618, "name": "Riverside Drive and North Glendale Boulevard, Los Angeles, California 90039, United States"}, {"lat": 34.06965, "lon": -118.396306, "name": "Beverly Hills, California, United States"}, {"lat": 34.172904, "lon": -118.374037, "name": "North Hollywood, California, United States"}, {"lat": 34.053691, "lon": -118.242766, "name": "Los Angeles, California, United States"}, {"lat": 34.11118, "lon": -118.25012, "name": "2760 Fletcher Drive, Los Angeles, California 90039, United States"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                          
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
        </script>
    </body>
</html>