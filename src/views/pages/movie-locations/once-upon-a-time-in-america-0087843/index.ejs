<!DOCTYPE html>
<html lang="en" dir="ltr">
<%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>

  <body class="film-location">
    <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
    <![endif]-->

    <noscript>
      <h3>Please enable JavaScript in order to view this site properly.</h3>
    </noscript>

    <%- include(`${partials}/nav`); -%>

     <main class="mb-4 mt-5">



        <div class="container px-4 px-lg-5">


            <div class="row align-items-md-stretch">
                
              <div class="col-md-12">

                <div class="card mb-3" id="film-details">
                  <div class="row g-0">
                    <div class="col-md-8 px-3 py-3">
                      <div class="card-body">
                      <h3 class="card-title">Once Upon a Time in America</h3>
          <p class="card-text mb-0">


  <span > A former Prohibition-era Jewish gangster returns to the Lower East Side of Manhattan 35 years later, where he must once again confront the ghosts and regrets of his old life.  </span>
                          <span > With the vivid memory of his long-gone childhood friends Max, Patsy, and Cockeye etched in his mind, his ferociously loyal partners-in-crime during their rise to prominence in New York's Prohibition-era Lower East Side, the defeated, penniless, and guilt-ridden former gangster David "Noodles" Aaronson returns to Manhattan. Not knowing what to expect on his mission to shed light on his opaque past, grizzled Noodles reunites with his only living friend Fat Moe after 35 haunted years of self-exile. However, the relentless, piercing sound of culpability stands in the way of finding closure, as the inscrutable content of a well-worn leather suitcase further complicates matters. And now, against the backdrop of a torn conscience, the sad, bittersweet recollections of more than 50 years of love, death, and everything in-between become inextricably intertwined, leading to even more puzzling questions. But what are a man's options when he is left with nothing? -Nick Riganas.  </span>
                          <span > Epic, episodic tale of the lives of a small group of New York City Jewish gangsters spanning over 40 years. Told mostly in flashbacks and flash-forwards, the movie centers on small-time hood David 'Noodles' Aaronson and his lifelong partners in crime: Max, Cockeye, and Patsy, and their friends from growing up in the rough Jewish neighborhood of New York's Lower East Side in the 1920s to the last years of Prohibition in the early 1930s, through to the late 1960s, where an elderly Noodles returns to New York after many years in hiding to look into the past. -Matthew Patay.  </span>
                          

                        </p>
                      </div>
                    </div>
                      <div class="col-md-4 justify-self-end">
                      <img
                                      src="https://m.media-amazon.com/images/M/MV5BMGFkNWI4MTMtNGQ0OC00MWVmLTk3MTktOGYxN2Y2YWVkZWE2XkEyXkFqcGdeQXVyNjU0OTQ0OTY@.jpg"
                                      class="img-fluid rounded-start"
                                      alt="Once Upon a Time in America"
                                    />
                    </div>
                     </div>
                </div>
              </div>
            </div>
          
            <div class="col-lg-12">
  <div class="map-container">
                  <div id="map"></div>
                  <div id="loader">
                    <div class="spinner-border" role="status">
                      <span class="sr-only d-none">Loading...</span>
                    </div>
                  </div>
                </div>

            </div>

 <table class="table">
          <tr class="table__header">

            <th class="table__cell">Location</th>
           <th class="table__cell">Coordiantes</th>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Williamsburg Bridge, Williamsburg Bridge, New York, New York 10002, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.710444332031244</span>, <span class="lon">-73.98189653417968</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Cinecittà Studios, Via Tuscolana, 1055, Roma, Rome 00173, Italy </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">41.852854</span>, <span class="lon">12.575212</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Don Cesar, Saint Petersburg Beach, Florida, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">27.7096</span>, <span class="lon">-82.7336</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Dumbo, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.7026</span>, <span class="lon">-73.9904</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Hoboken Terminal, 1 Hudson Pl, Hoboken, New Jersey 07030, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.735020500000005</span>, <span class="lon">-74.0280775</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Woodlawn Cemetery, Webster Avenue, New York, New York 10467, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.887268750000004</span>, <span class="lon">-73.876942</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Paris, France </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">48.85658</span>, <span class="lon">2.35183</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">139 Plymouth Street, Brooklyn, New York 11201, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.70387</span>, <span class="lon">-73.98773</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Manhattan Bridge, New York, New York 10002, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.71019</span>, <span class="lon">-73.99125</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Louiseville, Quebec, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">46.255609</span>, <span class="lon">-72.947502</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Ocean Avenue and Warren Avenue, Spring Lake, New Jersey 07762, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.149335</span>, <span class="lon">-74.023211</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">300 Rue Le Moyne, Montréal, Quebec H2Y 1Y2, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.501678</span>, <span class="lon">-73.556648</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Vinegar Hill, New York, New York, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.703651</span>, <span class="lon">-73.982253</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">95 South 8th Street, Brooklyn, New York 11249, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.709845</span>, <span class="lon">-73.9653</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">449 Rue Saint-Pierre, Montréal, Quebec H2Y 2M8, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.502065</span>, <span class="lon">-73.557709</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Porto Marghera, Porto Marghera, Venezia, Venice 30175, Italy </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.460386</span>, <span class="lon">12.244992</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">350 Flushing Avenue, Brooklyn, New York 11205, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.69808</span>, <span class="lon">-73.96056</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">300 Rue Saint-Sacrement, Montréal, Quebec H2Y 1X4, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.502045</span>, <span class="lon">-73.557128</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">105 South 8th Street, Brooklyn, New York 11249, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.70979</span>, <span class="lon">-73.96489</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">126 South 8th Street, Brooklyn, New York 11249, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.70948</span>, <span class="lon">-73.96432</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">2 Main Street, Brooklyn, New York 11201, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.7037</span>, <span class="lon">-73.99085</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">1228 Rue Sherbrooke Ouest, Montréal, Quebec H3G 0R1, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.499851</span>, <span class="lon">-73.577965</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">800 Boulevard Gouin Ouest, Montréal, Quebec H3L 3W3, Canada </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.546694</span>, <span class="lon">-73.684816</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Via Guglielmo Marconi 41, 30175 Venezia Venice, Italy </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">45.466566</span>, <span class="lon">12.225048</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">459 Broome Street, New York, New York 10013, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.72226</span>, <span class="lon">-74.00108</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">25-10 Court Square, Queens, New York 11101, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.746085</span>, <span class="lon">-73.943055</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">Via Pontina Vecchia, 00040 Ardea Rome, Italy </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">41.6420570101972</span>, <span class="lon">12.5558046158027</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">113 South 8th Street, Brooklyn, New York 11249, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.709755</span>, <span class="lon">-73.96453</span></a>
                
            </td>
          </tr>
          <tr class="table__row">
            <td class="table__cell">
             <a href="#">102 South 6th Street, Brooklyn, New York 11249, United States </a>
               
            </td>
                <td class="table__cell">
                <a href="#"><span class="lat">40.71064</span>, <span class="lon">-73.96461</span></a>
                
            </td>
          </tr>
          </tr>

        </table>
          </div>
        </div>


    </main>



     <%- include(`${partials}/footer`); -%> <%-include(`${partials}/homeScripts`); -%>

  <script type="text/javascript">

var locations =[{"bbox": [[40.149335, -74.023211], [40.69808, -73.96056], [40.7026, -73.9904]], "data": [{"lat": 40.710444332031244, "lon": -73.98189653417968, "name": "Williamsburg Bridge, Williamsburg Bridge, New York, New York 10002, United States"}, {"lat": 41.852854, "lon": 12.575212, "name": "Cinecitt\u00e0 Studios, Via Tuscolana, 1055, Roma, Rome 00173, Italy"}, {"lat": 27.7096, "lon": -82.7336, "name": "Don Cesar, Saint Petersburg Beach, Florida, United States"}, {"lat": 40.7026, "lon": -73.9904, "name": "Dumbo, New York, New York, United States"}, {"lat": 40.735020500000005, "lon": -74.0280775, "name": "Hoboken Terminal, 1 Hudson Pl, Hoboken, New Jersey 07030, United States"}, {"lat": 40.887268750000004, "lon": -73.876942, "name": "Woodlawn Cemetery, Webster Avenue, New York, New York 10467, United States"}, {"lat": 48.85658, "lon": 2.35183, "name": "Paris, France"}, {"lat": 40.70387, "lon": -73.98773, "name": "139 Plymouth Street, Brooklyn, New York 11201, United States"}, {"lat": 40.71019, "lon": -73.99125, "name": "Manhattan Bridge, New York, New York 10002, United States"}, {"lat": 46.255609, "lon": -72.947502, "name": "Louiseville, Quebec, Canada"}, {"lat": 40.149335, "lon": -74.023211, "name": "Ocean Avenue and Warren Avenue, Spring Lake, New Jersey 07762, United States"}, {"lat": 45.501678, "lon": -73.556648, "name": "300 Rue Le Moyne, Montr\u00e9al, Quebec H2Y 1Y2, Canada"}, {"lat": 40.703651, "lon": -73.982253, "name": "Vinegar Hill, New York, New York, United States"}, {"lat": 40.709845, "lon": -73.9653, "name": "95 South 8th Street, Brooklyn, New York 11249, United States"}, {"lat": 45.502065, "lon": -73.557709, "name": "449 Rue Saint-Pierre, Montr\u00e9al, Quebec H2Y 2M8, Canada"}, {"lat": 45.460386, "lon": 12.244992, "name": "Porto Marghera, Porto Marghera, Venezia, Venice 30175, Italy"}, {"lat": 40.69808, "lon": -73.96056, "name": "350 Flushing Avenue, Brooklyn, New York 11205, United States"}, {"lat": 45.502045, "lon": -73.557128, "name": "300 Rue Saint-Sacrement, Montr\u00e9al, Quebec H2Y 1X4, Canada"}, {"lat": 40.70979, "lon": -73.96489, "name": "105 South 8th Street, Brooklyn, New York 11249, United States"}, {"lat": 40.70948, "lon": -73.96432, "name": "126 South 8th Street, Brooklyn, New York 11249, United States"}, {"lat": 40.7037, "lon": -73.99085, "name": "2 Main Street, Brooklyn, New York 11201, United States"}, {"lat": 45.499851, "lon": -73.577965, "name": "1228 Rue Sherbrooke Ouest, Montr\u00e9al, Quebec H3G 0R1, Canada"}, {"lat": 45.546694, "lon": -73.684816, "name": "800 Boulevard Gouin Ouest, Montr\u00e9al, Quebec H3L 3W3, Canada"}, {"lat": 45.466566, "lon": 12.225048, "name": "Via Guglielmo Marconi 41, 30175 Venezia Venice, Italy"}, {"lat": 40.72226, "lon": -74.00108, "name": "459 Broome Street, New York, New York 10013, United States"}, {"lat": 40.746085, "lon": -73.943055, "name": "25-10 Court Square, Queens, New York 11101, United States"}, {"lat": 41.6420570101972, "lon": 12.5558046158027, "name": "Via Pontina Vecchia, 00040 Ardea Rome, Italy"}, {"lat": 40.709755, "lon": -73.96453, "name": "113 South 8th Street, Brooklyn, New York 11249, United States"}, {"lat": 40.71064, "lon": -73.96461, "name": "102 South 6th Street, Brooklyn, New York 11249, United States"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
    //console.log($(`${target} span`).first())

   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
</script>
  </body>
</html>