<!DOCTYPE html>
<html lang="en" dir="ltr">
    <%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>
    <body class="film-location film-details">
        <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
<![endif]-->
        <noscript>
            <h3>Please enable JavaScript in order to view this site properly.</h3>
        </noscript>
        <%- include(`${partials}/nav`); -%>
        <main class="mb-4 mt-5">
            <div class="container px-4 px-lg-5">
                     <%- include(`${partials}/autocomplete`); -%>
                <div class="row align-items-md-stretch">
                    <div class="col-md-12">
                        <div class="card mb-3" id="film-details">
                            <div class="row g-0">
                                <div class="col-md-8 px-3 py-3">
                                    <div class="card-body">
                                        <h3 class="card-title">The Wolf of Wall Street</h3>
                                        <p class="card-text mb-0">
                                            <span id="mainPlotContent">Based on the true story of Jordan Belfort, from his rise to a wealthy stock-broker living the high life to his fall involving crime, corruption and the federal government. In the early 1990s, Jordan Belfort teamed with his partner Donny Azoff and started brokerage firm Stratton Oakmont. Their company quickly grows from a staff of 20 to a staff of more than 250 and their status in the trading community and Wall Street grows exponentially. So much that companies file their initial public offerings through them. As their status grows, so do the amount of substances they abuse, and so do their lies. They draw attention like no other, throwing lavish parties for their staff when they hit the jackpot on high trades. That ultimately leads to Belfo...</span>
                                                
                                                    <div class="collapse" id="movieLocationCollapsible">
                                                        <div id = "module"></div>
                                                        <span id="metaPlotContent"class="additional-information">rt featured on the cover of Forbes Magazine, being called  The Wolf Of Wall St. . With the FBI onto Belfort's trading schemes, he devises new ways to cover his tracks and watch his fortune grow. Belfort ultimately comes up with a scheme to stash their cash in a European bank. But with the FBI watching him like a hawk, how long will Belfort and Azoff be able to maintain their elaborate wealth and luxurious lifestyles? halo1k</span>
                                                    </div>
                                                    <p>
                                                        <a class="btn btn-link show-more-less collapsed"
                                                               id="myCollapsibleBtn"
                                                      
                                                           role="button"
                                                       >
                                                        </a>
                                                    </p>
                                                
                                            </p>
                                    </div>
                                </div>
                                <div class="col-md-4 justify-self-end">
                                        <img src="https://m.media-amazon.com/images/M/MV5BMjIxMjgxNTk0MF5BMl5BanBnXkFtZTgwNjIyOTg2MDE@.jpg"
                                             class="img-fluid rounded-start"
                                             alt="The Wolf of Wall Street"/>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="map-container">
                        <div id="map"></div>
                        <div id="loader">
                            <div class="spinner-border" role="status">
                                <span class="sr-only d-none">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table">
                    <tr class="table__header">
                        <th class="table__cell">Location</th>
                        <th class="table__cell">Coordiantes</th>
                    </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Portofino, Metropolitan CityGenoa, Italy</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">44.303665</span>, <span class="lon">9.209345</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Ardsley Boulevard, Garden City, New York 11530, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.712675</span>, <span class="lon">-73.659765</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">455 East 114th Street, New York, New York 10029, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.79392</span>, <span class="lon">-73.93427</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">63-68 Austin Street, Queens, New York 11374, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.72717</span>, <span class="lon">-73.86391</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Closter, New Jersey, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.973154</span>, <span class="lon">-73.961526</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">White Plains, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">41.033986</span>, <span class="lon">-73.76291</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Chestnut Hill Drive, Oyster Bay, New York 11771, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.84932</span>, <span class="lon">-73.56709</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Las Vegas, Nevada, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">36.167256</span>, <span class="lon">-115.148516</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Marriott Vacation Club Pulse, 33 West 37th Street, New York, New York 10018, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.751296</span>, <span class="lon">-73.984819</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Mamaroneck, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.952836</span>, <span class="lon">-73.735517</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">300 East 55th Street, New York, New York 10022, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.757715</span>, <span class="lon">-73.96603</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">13240 Weidner Street, Pacoima, California 91331, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.27405</span>, <span class="lon">-118.42196</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Genève, Geneva, Switzerland</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">46.2</span>, <span class="lon">6.15</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">725 5th Avenue, Brooklyn, New York 11220, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.660188</span>, <span class="lon">-73.994629</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">The Harrison, Floral Park, New York 11001, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.725384</span>, <span class="lon">-73.704</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Bayville, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.910654</span>, <span class="lon">-73.562069</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Brooklyn, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.652601</span>, <span class="lon">-73.949721</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Sands Point, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.851767</span>, <span class="lon">-73.718742</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Bahamas</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">25.07471</span>, <span class="lon">-77.3408</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">385 South End Avenue, New York, New York 10280, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.7116</span>, <span class="lon">-74.01652</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">JC Studios, 1268 E 14th St, New York, New York 11230, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.618286</span>, <span class="lon">-73.9612235</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Los Angeles, California, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">34.053691</span>, <span class="lon">-118.242766</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Nassau Street, New York, New York 10038, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.71062</span>, <span class="lon">-74.00722</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Equitable Building, 120 Broadway, New York, New York 10271, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.7086155</span>, <span class="lon">-74.010925</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">10 Vanderbilt Drive, Sands Point, New York 11050, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.86484</span>, <span class="lon">-73.72157</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Sands Point Shop, 15 Main St, Port Washington, New York 11050, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.830915</span>, <span class="lon">-73.68518</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">PORT, Greenport, New York 11944, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">41.100829</span>, <span class="lon">-72.362126</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Switzerland</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">46.8024955829499</span>, <span class="lon">8.23439191387853</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Oyster Bay, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.872552</span>, <span class="lon">-73.530516</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">New York, New York, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">40.7306</span>, <span class="lon">-73.9866</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">39.3812661305678</span>, <span class="lon">-97.9222112121185</span></a>
                            </td>
                        </tr>
                    </tr>
            </table>
        </div>
    </div>
</main>
    <%- include(`${partials}/footer`); -%> <%- include(`${partials}/page-scripts/movie-location-scripts`); -%>

<script type="text/javascript">
var locations =[{"bbox": [[40.618286, -73.9612235], [40.652601, -73.949721], [40.660188, -73.994629]], "data": [{"lat": 44.303665, "lon": 9.209345, "name": "Portofino, Metropolitan CityGenoa, Italy"}, {"lat": 40.712675, "lon": -73.659765, "name": "Ardsley Boulevard, Garden City, New York 11530, United States"}, {"lat": 40.79392, "lon": -73.93427, "name": "455 East 114th Street, New York, New York 10029, United States"}, {"lat": 40.72717, "lon": -73.86391, "name": "63-68 Austin Street, Queens, New York 11374, United States"}, {"lat": 40.973154, "lon": -73.961526, "name": "Closter, New Jersey, United States"}, {"lat": 41.033986, "lon": -73.76291, "name": "White Plains, New York, United States"}, {"lat": 40.84932, "lon": -73.56709, "name": "Chestnut Hill Drive, Oyster Bay, New York 11771, United States"}, {"lat": 36.167256, "lon": -115.148516, "name": "Las Vegas, Nevada, United States"}, {"lat": 40.751296, "lon": -73.984819, "name": "Marriott Vacation Club Pulse, 33 West 37th Street, New York, New York 10018, United States"}, {"lat": 40.952836, "lon": -73.735517, "name": "Mamaroneck, New York, United States"}, {"lat": 40.757715, "lon": -73.96603, "name": "300 East 55th Street, New York, New York 10022, United States"}, {"lat": 34.27405, "lon": -118.42196, "name": "13240 Weidner Street, Pacoima, California 91331, United States"}, {"lat": 46.2, "lon": 6.15, "name": "Gen\u00e8ve, Geneva, Switzerland"}, {"lat": 40.660188, "lon": -73.994629, "name": "725 5th Avenue, Brooklyn, New York 11220, United States"}, {"lat": 40.725384, "lon": -73.704, "name": "The Harrison, Floral Park, New York 11001, United States"}, {"lat": 40.910654, "lon": -73.562069, "name": "Bayville, New York, United States"}, {"lat": 40.652601, "lon": -73.949721, "name": "Brooklyn, New York, United States"}, {"lat": 40.851767, "lon": -73.718742, "name": "Sands Point, New York, United States"}, {"lat": 25.07471, "lon": -77.3408, "name": "Bahamas"}, {"lat": 40.7116, "lon": -74.01652, "name": "385 South End Avenue, New York, New York 10280, United States"}, {"lat": 40.618286, "lon": -73.9612235, "name": "JC Studios, 1268 E 14th St, New York, New York 11230, United States"}, {"lat": 34.053691, "lon": -118.242766, "name": "Los Angeles, California, United States"}, {"lat": 40.71062, "lon": -74.00722, "name": "Nassau Street, New York, New York 10038, United States"}, {"lat": 40.7086155, "lon": -74.010925, "name": "Equitable Building, 120 Broadway, New York, New York 10271, United States"}, {"lat": 40.86484, "lon": -73.72157, "name": "10 Vanderbilt Drive, Sands Point, New York 11050, United States"}, {"lat": 40.830915, "lon": -73.68518, "name": "Sands Point Shop, 15 Main St, Port Washington, New York 11050, United States"}, {"lat": 41.100829, "lon": -72.362126, "name": "PORT, Greenport, New York 11944, United States"}, {"lat": 46.8024955829499, "lon": 8.23439191387853, "name": "Switzerland"}, {"lat": 40.872552, "lon": -73.530516, "name": "Oyster Bay, New York, United States"}, {"lat": 40.7306, "lon": -73.9866, "name": "New York, New York, United States"}, {"lat": 39.3812661305678, "lon": -97.9222112121185, "name": "United States"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
    //console.log($(`${target} span`).first())

   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
</script>
</body>
</html>