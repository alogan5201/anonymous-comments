<!DOCTYPE html>
<html lang="en" dir="ltr">
    <%- include(`${partials}/movieLocationHead.ejs`, {pageTitle: 'Film Locations'}); -%>
    <body class="film-location film-details">
        <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an <strong>outdated</strong> browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a> to improve
        your experience.
      </p>
<![endif]-->
        <noscript>
            <h3>Please enable JavaScript in order to view this site properly.</h3>
        </noscript>
        <%- include(`${partials}/nav`); -%>
        <main class="mb-4 mt-5">
            <div class="container px-4 px-lg-5">
                <%- include(`${partials}/autocomplete`); -%>
                <div class="row align-items-md-stretch">
                    <div class="col-md-12">
                        <div class="card mb-3" id="film-details">
                            <div class="row g-0">
                                <div class="col-md-8 px-3 py-3">
                                    <div class="card-body">
                                        <h3 class="card-title">Dangal</h3>
                                        <p class="card-text mb-0">
                                            <span id="mainPlotContent"> Former wrestler Mahavir Singh Phogat and his two wrestler daughters struggle towards glory at the Commonwealth Games in the face of societal oppression. Biopic of Mahavir Singh Phogat, who taught wrestling to his daughters Babita Kumari and Geeta Phogat. Geeta Phogat was India's first female wrestler to win at the 2010 Commonwealth Games, where she won the gold medal (55 kg) while her sister Babita Kumari won the silver (51 kg). Dibyayan_Chakravorty Dangal is a biography of a real life patriotic fighter Mahavir Singh Phogat who raises his daughters and evolves them into World Class Fighters. The movie begins with a crochy brawl between Mahavir (Aamir Khan) and his colleague who was also former wrestler, thus embalming the terrific Dangal Th... </span>
                                                
                                                    <div class="collapse" id="movieLocationCollapsible">
                                                        <span id="metaPlotContent"class="additional-information"> eme, discovering Mahavir's past life of a Wrestler. Mahavir admires to make his dreams come true by his sons but on contrary, four daughters take birth. They come with a complaint of beating down a boy in their locality. Hence Mahavir hopes they would be future Wrestlers. So he trains his daughters Gita and Babita, thus proving they're no less than a professional male wrestler. After a long struggle, Gita enters the National level Wrestling and acquires victory. When she is up to the Internationals, she opts to get trained from the NSA(National Sports Academy) where a coach mis-trains Gita, due to which she deliberately fails every match she attempts. Her sister Babita also attains an age to get into Wresting. Now, Mahavir plans to train both by his own norms. Finally, Gita defeats an Australian Wrestler by following the predominant path of her father, not of the coach. The movie is par excellent, enridges Women Empowerment in the Nation. Srivathsavan Iyengar Mahavir Singh Phogat is a former wrestling champion had to quit the sport due to his family pressure as it was not helping his family financially.He only dreams that his son should win Gold Medal for India in wrestling but back to back he has four daughter's.Mahavir feels his dream cant be complete and starts staying away from the sport,while his daughter Geeta and Babita are growing the notices that they have quality of being wrestlers and starts training them,Geeta and Babita have to get a hard training and start to dislike their father for this but they realize that their father is doing this for their betterment and take the sport seriously. Geeta soon becomes a a known wrestler in the state and wins Junior International.Geeta further has to Patiala for further training to participate in common wealth games where she has a new coach Pramod Kadam.Meanwhile Babita makes her name at Junior level.Geeta believes her coach's training is better than her father which makes Mahavir very depressed. alex.mjacko@gmail.com </span>
                                                    </div>
                                                    <p>
                                                        <a class="btn btn-link show-more-less collapsed"
                                                           id="myCollapsibleBtn"
                                                           role="button"></a>
                                                    </p>
                                                
                                            </p>
                                    </div>
                                </div>
                                <div class="col-md-4 justify-self-end">
                                        <img src="https://m.media-amazon.com/images/M/MV5BMTQ4MzQzMzM2Nl5BMl5BanBnXkFtZTgwMTQ1NzU3MDI@.jpg"
                                             class="img-fluid rounded-start"
                                             alt="Dangal"/>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-12">
                    <div class="map-container">
                        <div id="map"></div>
                        <div id="loader">
                            <div class="spinner-border" role="status">
                                <span class="sr-only d-none">Loading...</span>
                            </div>
                        </div>
                    </div>
                </div>
                <table class="table">
                    <tr class="table__header">
                        <th class="table__cell">Location</th>
                        <th class="table__cell">Coordiantes</th>
                    </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Pune, Maharashtra, India</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">18.521428</span>, <span class="lon">73.854454</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Delhi, India</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">28.66667</span>, <span class="lon">77.21667</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Ludhiana, Punjab, India</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">30.909016</span>, <span class="lon">75.851601</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">Austin, Texas, United States</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">30.271129</span>, <span class="lon">-97.7437</span></a>
                            </td>
                        </tr>
                    <tr class="table__row">
                            <td class="table__cell">
                                <a href="#">London, Greater London, England, United Kingdom</a>
                            </td>
                            <td class="table__cell">
                                <a href="#"><span class="lat">51.515618</span>, <span class="lon">-0.091998</span></a>
                            </td>
                        </tr>
                    </table>
            </div>
        </main>
        <%- include(`${partials}/footer`); -%> <%- include(`${partials}/page-scripts/movie-location-scripts`); -%>
        <script type="text/javascript">
var locations =[{"bbox": null, "data": [{"lat": 18.521428, "lon": 73.854454, "name": "Pune, Maharashtra, India"}, {"lat": 28.66667, "lon": 77.21667, "name": "Delhi, India"}, {"lat": 30.909016, "lon": 75.851601, "name": "Ludhiana, Punjab, India"}, {"lat": 30.271129, "lon": -97.7437, "name": "Austin, Texas, United States"}, {"lat": 51.515618, "lon": -0.091998, "name": "London, Greater London, England, United Kingdom"}]}];
var map = L.map('map').setView([0,0], 20);

const layer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
})


let locationData = locations[0].data
let tableCell = document.querySelectorAll('.table__cell a')

tableCell.forEach(box => {
  box.addEventListener('click', function handleClick(event) {
    event.preventDefault()
    let target = event.target
   let boxChildren = $(this).children()
   if(boxChildren.length < 1 ){
const found = locationData.find(element => element.name == target.innerText);

    let lat = found.lat
    let lon = found.lon
    let name = found.name
   map.flyTo([lat, lon])

    $('html,body').animate({                                                          //  fine in moz, still quicker in chrome.
        scrollTop: $("#map").offset().top},
        'slow');

   } else {

     let first = $(this).children().first().text()
     let second = $(this).children().last().text()
     let lat = parseFloat(first)
     let lon = parseFloat(second)
     console.log(lat,lon)
   map.flyTo([lat, lon])

    $('html,body').animate({                          
        scrollTop: $("#map").offset().top},
        'slow');
   }


});
});



const coords = []
    for (let index = 0; index < locations[0].data.length; index++) {
  const element = locations[0].data[index];
 coords.push([element.lat, element.lon])

  let marker = L.marker([element.lat, element.lon]);
  marker.bindPopup(element.name);
marker.addTo(map);

}

if(locations[0].bbox){

const box = locations[0].bbox
  console.log(JSON.stringify(box))
  map.fitBounds(box)
map.zoomOut(1);
}
else if (!locations[0].bbox){

  console.log('no box')
  console.log(locations[0].data[0].lat)
  let lat = locations[0].data[0].lat
  let lon = locations[0].data[0].lon
map.setView([lat, lon], 20);
}
layer.on('load', function (event) {
     document.getElementById('loader').classList.add('d-none')



});
layer.addTo(map);
        </script>
    </body>
</html>