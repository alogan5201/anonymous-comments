<!DOCTYPE html> <html lang=en> <head> <meta charset=UTF-8> <meta http-equiv=X-UA-Compatible content="IE=edge"> <meta name=viewport content="width=device-width,initial-scale=1"> <title>Document</title> <link rel=stylesheet href=mystyle.css> </head> <body> <div id=map class="leaflet-container leaflet-fade-anim" tabindex=0 style=position:relative></div> </body> <script>!function(){var t=this.map=new L.Map("map",{contextmenu:!0,contextmenuItems:[{text:"Bookmark this position",callback:function(t){this.fire("bookmark:new",{latlng:t.latlng})}}]}).setView([22.267,114.188],13);L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);var r,e={setItem:function(t,e,o){setTimeout(function(){r.push(e),o(e)},1e3)},getItem:function(e,t){setTimeout(function(){t(r.filter(function(t){return t.id===e})[0])},1500)},getAllItems:function(e){reqwest({url:"data/bookmarks.json",type:"json",success:function(t){e(r=t)}})},removeItem:function(n,i){setTimeout(function(){for(var t,e=0,o=r.length;e<o;e++)if(r[e].id===n){t=r[e],r.splice(e,1);break}i(t)},1e3)}};this.storage=e;var o=new L.Control.Bookmarks({storage:e});t.addControl(o)}()</script> </html> 