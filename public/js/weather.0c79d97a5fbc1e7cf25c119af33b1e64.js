/*!
* GeoTools
* Boilerplate for a Static website using EJS and SASS
* example.com
* @author Brenton Cozby -- https://brentoncozby.com
* Copyright 2022. MIT Licensed.
*/

!function(e){function n(n){for(var a,r,i=n[0],l=n[1],c=n[2],m=0,_=[];m<i.length;m++)r=i[m],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&_.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);for(d&&d(n);_.length;)_.shift()();return s.push.apply(s,c||[]),t()}function t(){for(var e,n=0;n<s.length;n++){for(var t=s[n],a=!0,i=1;i<t.length;i++){var l=t[i];0!==o[l]&&(a=!1)}a&&(s.splice(n--,1),e=r(r.s=t[0]))}return e}var a={},o={13:0},s=[];function r(n){if(a[n])return a[n].exports;var t=a[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=a,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)r.d(t,a,function(n){return e[n]}.bind(null,a));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/js/";var i=window.webpackJsonp=window.webpackJsonp||[],l=i.push.bind(i);i.push=n,i=i.slice();for(var c=0;c<i.length;c++)n(i[c]);var d=l;s.push([46,0]),t()}({12:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n/* harmony import */ var firebase_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2);\n/* harmony import */ var firebase_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);\n/* harmony import */ var utils_comments__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4);\n/* harmony import */ var utils_helpers__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5);\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(9);\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(6);\n/* harmony import */ var dompurify__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dompurify__WEBPACK_IMPORTED_MODULE_7__);\n/* jshint esversion: 8 */\n\n\n\n\n\n\n\n\nconst auth = Object(firebase_auth__WEBPACK_IMPORTED_MODULE_2__[/* getAuth */ "c"])();\nconst db = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* getDatabase */ "b"])(); // commentReply( name, id, date, message)\n// comment (id, name, date, message, likes, dislikes)\n\n$(".modal-close-btn").on("click", function (e) {\n  e.preventDefault();\n  const modalId = $(this).parent().parent().parent().parent().attr("id");\n  let modal = modalId == "filterCommentSuccess" ? "success" : "fail";\n  Object(utils_helpers__WEBPACK_IMPORTED_MODULE_5__[/* toggleModal */ "b"])(modal);\n});\n\nDate.prototype.toShortFormat = function () {\n  let monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];\n  let day = this.getDate();\n  let monthIndex = this.getMonth();\n  let monthName = monthNames[monthIndex];\n  let year = this.getFullYear();\n  return `${monthName} ${year}`;\n};\n\nlet today = new Date();\nconst prettyDate = today.toShortFormat();\nconst path = window.location.pathname;\nconst commentRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}`);\n/**\n *---------------------------------------------------------------------\n * !! DISPLAY COMMENTS\n * -------------------------------------------------------------------\n */\n\nfunction displayComments() {\n  Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* get */ "a"])(commentRef).then(snapshot => {\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const map = new Map(Object.entries(data));\n\n      for (const [key, value] of map.entries()) {\n        let likes = value.likes && value.likes.likes ? value.likes.likes : "";\n        let dislikes = value.dislikes && value.dislikes.dislikes ? value.dislikes.dislikes : "";\n        const dateinfo = value.date ? value.date : "";\n        const commentsList = Object(utils_comments__WEBPACK_IMPORTED_MODULE_4__[/* comment */ "a"])(value.id, value.name, dateinfo, value.message, likes, dislikes);\n        $("#comment-section").append(commentsList);\n\n        if (value.replies) {\n          let ex = Object(utils_comments__WEBPACK_IMPORTED_MODULE_4__[/* extractReplies */ "c"])(value.replies);\n\n          for (let index = 0; index < ex.length; index++) {\n            const element = ex[index];\n            let recipient = $(`#${element.recipient} .other-comments`);\n            let replies = Object(utils_comments__WEBPACK_IMPORTED_MODULE_4__[/* commentReply */ "b"])(element.name, element.id, element.date, element.message);\n            $(recipient[0]).append(`  <div class="col-md-11 p-3 mb-3" >\n   <div class="row ">\n   <div class="col-lg-12 border-start">\n      <div class="d-flex justify-content-between align-items-center border-bottom pb-2">\n     <h6 class="fw-bold text-primary mb-1 ">${element.name}</h6>\n     <p class="text-muted small m-0">\n      ${element.date}\n     </p>\n     </div>\n     <p class="mt-3 mb-0 pb-2">\n     ${element.message}\n     </p>\n   </div>\n   </div>\n     </div>\n\n\n`);\n          }\n        }\n      }\n    } else {}\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\ndisplayComments();\n/**\n *---------------------------------------------------------------------\n * !! COMMENT SUBMIT\n * -------------------------------------------------------------------\n */\n\n$("#comment-form").on("submit", async function (e) {\n  e.preventDefault();\n  let userCheck = getUser();\n  console.log(userCheck);\n  $("#comment-btn").disabled = true;\n  const inputs = $("#comment-form :input");\n  const children = $(this).children();\n  $("#comment-btn").html(` <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\nVerifying..`);\n\n  if (!userCheck) {\n    console.log("no user on frontend");\n    const newUser = await createRandomUser();\n    console.log(newUser);\n    let name = e.currentTarget[0].value.length > 0 ? e.currentTarget[0].value : "Guest";\n    let message = e.currentTarget[1].value;\n    let cleanMessage = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(message);\n    let cleanName = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(name);\n    const userData = JSON.parse(localStorage.getItem("userData"));\n    handleComment(cleanMessage, cleanName, newUser.uid, path);\n  } else {\n    let name = e.currentTarget[0].value.length > 0 ? e.currentTarget[0].value : "Guest";\n    let message = e.currentTarget[1].value;\n    let cleanMessage = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(message);\n    let cleanName = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(name);\n    const userData = JSON.parse(localStorage.getItem("userData"));\n    handleComment(cleanMessage, cleanName, userData, path);\n  }\n});\n/**\n *---------------------------------------------------------------------\n * !! COMMENT REPLY SUBMIT\n * -------------------------------------------------------------------\n */\n\n$("#comment-section").on("click", ".reply-btn", function (e) {\n  e.preventDefault();\n  let item = $(this);\n  let btn = item[0];\n  let siblings = $(this).parent().parent().siblings();\n  let otherComments = siblings[0]; // let parentTag = $(this).parent().parent().attr(\'id\');\n\n  let parentTag = $(this).parent().parent().attr("id");\n  let grandFather = $(this).parent().parent().parent().children().last().children();\n  let footer = $(this).parent().parent().parent().children().last();\n  let replySection = $(this).parent().parent().parent().children().last().children();\n  console.log(btn);\n  const replyFormComponent = Object(utils_comments__WEBPACK_IMPORTED_MODULE_4__[/* replyForm */ "d"])();\n  $(footer).append(replyFormComponent);\n  $(replySection).addClass("d-none");\n  btn.disabled = true;\n  $(".reply-form").on("submit", function (e) {\n    e.preventDefault();\n    let elem = $(this);\n    let buttonElm = e.target[2];\n    let formElements = e.target;\n    buttonElm.disabled = true;\n    $(buttonElm).html(` <span class="spinner-grow spinner-grow-sm" role="status" aria-hidden="true"></span>\nVerifying..`);\n    let name = formElements[0].value.length > 0 ? formElements[0].value : "Guest";\n    let message = formElements[1];\n    let parent = $(this).parent();\n    let siblings = $(this).siblings();\n    let otherComments = siblings[1];\n    let cleanMessage = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(message.value);\n    let cleanName = dompurify__WEBPACK_IMPORTED_MODULE_7___default.a.sanitize(name);\n    const docId = $(this).parent().parent().attr("id");\n    let messageText = `${cleanName} ${cleanMessage}`;\n    let replyForm = $(this);\n    let otherSiblings = siblings[0];\n    setTimeout(() => {\n      const userData = JSON.parse(localStorage.getItem("userData"));\n      Object(_firebase__WEBPACK_IMPORTED_MODULE_6__["addCommentMessage"])(cleanMessage, cleanName);\n      const uid = userData.uid;\n    }, 2000);\n  });\n});\n/**\n *---------------------------------------------------------------------\n * !! THUMBS UP\n * -------------------------------------------------------------------\n */\n\n$("#comment-section").on("click", "#thumbs-up", function (e) {\n  e.preventDefault();\n  let btn = $(this);\n  btn[0].disabled = true;\n  let t = $(this);\n  let anchor = t[0];\n  let countText = $(this).children().last().text();\n  let parentTag = $(this).parent().parent().parent().attr("id");\n  Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* onValue */ "d"])(commentRef, snapshot => {\n    snapshot.forEach(childSnapshot => {\n      const childKey = childSnapshot.key;\n      const childData = childSnapshot.val(); //\n\n      if (childData.id == parentTag) {\n        const postListRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}${childKey}/likes`);\n        const newPostRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* push */ "e"])(postListRef);\n        Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}${childKey}/likes`), {\n          likes: Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* increment */ "c"])(1)\n        });\n      }\n    });\n  }, {\n    onlyOnce: true\n  });\n  let newCount = parseInt(countText) + 1 || 1;\n  $(this).children().first().removeClass("far fa-thumbs-up me-2").addClass("fas fa-thumbs-up me-2");\n  $(this).children().first().css("color", "#0085A1");\n  $(this).children().last().html(newCount);\n});\n/**\n *---------------------------------------------------------------------\n * !! THUMBS DOWN\n * -------------------------------------------------------------------\n */\n\n$("#comment-section").on("click", "#thumbs-down", function (e) {\n  e.preventDefault();\n  let t = $(this);\n  t[0].disabled = true;\n  let anchor = t[0];\n  let countText = $(this).children().last().text();\n  let parentTag = $(this).parent().parent().parent().attr("id");\n  Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* onValue */ "d"])(commentRef, snapshot => {\n    snapshot.forEach(childSnapshot => {\n      const childKey = childSnapshot.key;\n      const childData = childSnapshot.val(); //\n\n      if (childData.id == parentTag) {\n        const postListRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}${childKey}/likes`);\n        const newPostRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* push */ "e"])(postListRef);\n        Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}${childKey}/dislikes`), {\n          dislikes: Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* increment */ "c"])(1)\n        });\n      }\n    });\n  }, {\n    onlyOnce: true\n  });\n  let newCount = parseInt(countText) + 1 || 1;\n  $(this).children().first().removeClass("far fa-thumbs-down me-2").addClass("fas fa-thumbs-down me-2");\n  $(this).children().first().css("color", "#0085A1");\n  $(this).children().last().html(newCount);\n});\n\n//# sourceURL=webpack:///./src/js/utils/commentscript.js?')},4:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* unused harmony export popupContent */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return commentReply; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return comment; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return replyForm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return extractReplies; });\nfunction popupContent(data) {\n  let result = `  <div class="row">\n\n            <div class="col">\n\n\n     <div class="modal-content rounded-6 shadow">\n\n      <div class="modal-body py-3">\n\n\n        <p>This is a modal sheet, a variation of the modal that docs itself to the bottom of the viewport like the newer share sheets in iOS.</p>\n      </div>\n      <div class="modal-footer flex-column border-top-0">\n\n   <button type="button" id="getAltitude"class="btn btn-primary">Get Altitude</button>\n\n\n  <button type="button" class="btn  bookmark-btn  btn-light text-primary border-primary"> Bookmark <i class="far fa-bookmark"></i></button>\n\n\n\n\n      </div>\n    </div>\n            </div>\n        </div>`;\n  return result;\n}\nfunction commentReply(name, id, date, message) {\n  let data = `  <div class="col-md-11 p-3 mb-3" id=${id} >\n       <div class="row ">\n       <div class="col-lg-12 border-start">\n          <div class="d-flex justify-content-between align-items-center border-bottom pb-2">\n         <h6 class="fw-bold text-primary mb-1 ">${name}</h6>\n         <p class="text-muted small m-0">\n          ${date}\n         </p>\n         </div>\n         <p class="mt-3 mb-0 pb-2">\n         ${message}\n         </p>\n       </div>\n       </div>\n         </div>`;\n  return data;\n}\nfunction comment(id, name, date, message, likes, dislikes) {\n  let data = `\n   <div class="col-md-12 col-lg-12 col-xl-12">\n     <div class="card border-0 " id=${id} style="background-color: transparent">\n       <div class="card-body">\n         <div class="d-flex justify-content-between align-items-center border-bottom pb-2">\n           <h6 class="fw-bold text-primary mb-1 ">${name}</h6>\n           <p class="text-muted m-0">\n             ${date}\n           </p>\n         </div>\n         <p class="mt-3 mb-0 pb-2">\n           ${message}\n         </p>\n\n         <div class=" d-flex justify-content-start">\n           <button  id="thumbs-up" role="button" class="d-flex align-items-center me-3 btn btn-link  border-0" style="background-color: transparent !important; padding-left: 0 !important; margin-right: 0.25rem  !important">\n             <i class="far fa-thumbs-up me-2"></i> <span id="count">${likes}</span>\n           </button>\n             <button  id="thumbs-down" role="button" class="d-flex align-items-center me-3 btn btn-link  border-0" style="background-color: transparent !important; padding-left: 0 !important; margin-right: 0.25rem  !important">\n             <i class="far fa-thumbs-down me-2"></i> <span id="count">${dislikes}</span>\n           </button>\n           <button id= "reply-btn" class="d-flex align-items-center me-3 reply-btn btn btn-link  border-0" style="background-color: transparent !important; padding-left: 0 !important; margin-right: 0.25rem  !important">\n             <i class="far fa-comment-dots me-2"></i>\n             <p class="m-0">Reply</p>\n           </button>\n\n         </div>\n       </div>\n       <div class="card-footer py-3 border-0  row " style="background-color: transparent !important">\n         <div class="other-comments">\n\n         </div>\n       </div>\n     </div>\n   </div>`;\n  return data;\n}\nfunction replyForm() {\n  let data = `<form class="reply-form">\n <div class="d-flex flex-start w-100 ">\n     <div class="col-md-11 p-3 mb-3">\n    <div class="form-outline w-100">\n\n      <div class="mb-3">\n\n        <input type="text" class="form-control" id="exampleInputEmail1" aria-describedby="replyName" placeholder="Name (Optional)">\n\n\n      </div>\n\n      <textarea class="form-control" id="textAreaExample" rows="4" style="background: #fff;" placeholder="Write a comment."></textarea>\n\n    </div>\n\n    <button type="submit" id="reply-btn" class="btn btn-primary btn-sm mt-3">Send <i class="far fa-paper-plane"></i></button>\n   </div>\n\n    </div>\n\n\n</form>`;\n  return data;\n}\nfunction extractReplies(replies) {\n  let response = [];\n  const map = new Map(Object.entries(replies));\n\n  for (const [key, value] of map.entries()) {\n    let newObject = {\n      id: key,\n      name: value.name,\n      message: value.message,\n      date: value.date,\n      recipient: value.recipient\n    };\n    response.push(newObject);\n  }\n\n  return response;\n}\n/* unused harmony default export */ var _unused_webpack_default_export = ({\n  comment,\n  commentReply,\n  extractReplies\n});\n\n//# sourceURL=webpack:///./src/js/utils/comments.js?')},46:function(module,exports,__webpack_require__){eval("__webpack_require__(9);\nmodule.exports = __webpack_require__(47);\n\n\n//# sourceURL=webpack:///multi_./src/js/firebase.js_./src/js/weather.js?")},47:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var utils_commentscript_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(12);\n/* jshint esversion: 8 */\n\nlet geojson = {\n  type: 'FeatureCollection',\n  features: [{\n    type: 'Feature',\n    geometry: {\n      type: 'Point',\n      coordinates: [0, 0]\n    },\n    properties: {\n      currentWeather: '',\n      temp: '',\n      image: '',\n      'marker-color': '#35A2D1',\n      'marker-size': 'large'\n    }\n  }]\n};\n\nfunction inputFocus(x) {\n  if ($('#secondOutput').hasClass('second')) {\n    $('#secondOutput').removeClass('second').addClass('fadeOut');\n    $('#firstOutput').removeClass('first').addClass('fadeOut');\n    setTimeout(() => {\n      $('#secondOutput').addClass('d-none');\n      $('#firstOutput').addClass('d-none');\n    }, 2000);\n  } //\n\n}\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  let scrollPos = 0;\n  const mainNav = document.getElementById('mainNav');\n  const headerHeight = mainNav.clientHeight;\n\n  function ConvertDMSToDD(degrees, minutes, seconds, direction) {\n    var dd = degrees + minutes / 60 + seconds / (60 * 60);\n\n    if (direction == 'S' || direction == 'W') {\n      dd = dd * -1;\n    } // Don't do anything for N or E\n\n\n    return dd;\n  }\n\n  const north = document.getElementById('north');\n  const south = document.getElementById('south');\n  const degreesLat = document.getElementById('degrees-lat');\n  const minutesLat = document.getElementById('minutes-lat');\n  const secondsLat = document.getElementById('seconds-lat');\n  const degreesLon = document.getElementById('degrees-lon');\n  const minutesLon = document.getElementById('minutes-lon');\n  const secondsLon = document.getElementById('seconds-lon');\n  const east = document.getElementById('east');\n  const west = document.getElementById('west');\n  const outputInputField = document.getElementById('output-field-input');\n  const dmsBtn = document.getElementById('dmsBtn');\n  const dmsForm = document.getElementById('dms');\n  const latlonForm = document.getElementById('latlonForm');\n\n  function DDtoDMS(lat, lon) {\n    //\n    let latitude = Math.abs(lat);\n    let longitude = Math.abs(lon);\n    let dLat = Math.floor(latitude);\n    let mLat = Math.floor((latitude - dLat) * 60);\n    sLat = Math.round((latitude - dLat - mLat / 60) * 1e3 * 3600) / 1e3;\n    dLon = Math.floor(longitude);\n    mLon = Math.floor((longitude - dLon) * 60);\n    sLon = Math.floor((longitude - dLon - mLon / 60) * 1e3 * 3600) / 1e3;\n    let degreesLatitude = dLat;\n    let minutesLatitude = mLat;\n    let secondsLatitude = sLat;\n    let degreesLongitude = dLon;\n    let minutesLongitude = mLon;\n    let secondsLongitude = sLon;\n    let latResult = `${degreesLatitude}° ${minutesLatitude}' ${secondsLatitude}''`;\n    let lonResult = `${degreesLongitude}° ${minutesLongitude}' ${secondsLongitude}''`;\n    let result = {\n      lat: latResult,\n      lon: lonResult\n    };\n    return result;\n  }\n\n  function check(elm) {\n    document.getElementById(elm).checked = true;\n  }\n\n  const convertLocationData = document.getElementById('convertLocationData');\n  const latInputField = document.getElementById('latInputField');\n  const lonInputField = document.getElementById('lonInputField');\n\n  const App = function _App() {\n    return `\n   <h1>Global State = [${App.state.count}] </h1>\n  `;\n  };\n\n  const handler = {\n    set: function (obj, prop, value) {\n      obj[prop] = value;\n    }\n  };\n  App.state = new Proxy({\n    count: 0\n  }, handler); // Initial Loading of the App\n\n  const CoordsApp = function _CoordsApp() {\n    return `\n   <h1>Origin State = [${CoordsApp.state.origin}] </h1> </br>\n   <h1>Destination State = [${CoordsApp.state.destination}] </h1>\n   <h1>User Location = [${CoordsApp.state.userLocation}] </h1>\n   <h1>trackingUser =  ${CoordsApp.state.trackingUser}</h1>\n  `;\n  };\n\n  const myhandler = {\n    set: function (obj, prop, value) {\n      obj[prop] = value;\n    }\n  };\n  CoordsApp.state = new Proxy({\n    origin: [],\n    destination: [],\n    userLocation: []\n  }, myhandler);\n  L.mapbox.accessToken = 'pk.eyJ1IjoibG9nYW41MjAxIiwiYSI6ImNrcTQybTFoZzE0aDQyeXM1aGNmYnR1MnoifQ.4kRWNfEH_Yao_mmdgrgjPA';\n\n  const finishedLoading = () => {\n    setTimeout(function () {// then, after a half-second, add the class 'hide', which hides\n      // it completely and ensures that the user can interact with the\n      // map again.\n    }, 500);\n  };\n\n  const map = L.mapbox.map('map').setView([37.9, -77], 6);\n  L.mapbox.styleLayer('mapbox://styles/mapbox/streets-v11').addTo(map) // add your tiles to the map\n  .on('load', finishedLoading); // var myLayer = L.mapbox.featureLayer().addTo(map);\n\n  const marker = L.marker([0, 0], {\n    icon: L.mapbox.marker.icon({\n      'marker-size': 'large',\n      'marker-color': 'blue'\n    })\n  }).addTo(map); // L.marker is a low-level marker constructor in Leaflet.\n\n  var locationControl = L.control.locate({\n    circleStyle: {\n      opacity: 0\n    },\n    followCircleStyle: {\n      opacity: 0\n    },\n    drawCircle: false,\n    follow: false,\n    setView: false,\n    iconLoading: 'spinner-border spinner-border-sm map-spinner',\n    remainActive: false,\n    icon: 'my-geo-icon',\n    locateOptions: {\n      enableHighAccuracy: true\n    }\n  }).addTo(map);\n  /**\n   *\n   * TODO Create PYTHON SCRIPT to render partials pages and change leaflet cdn script and css link\n   */\n\n  map.on('locationfound', function (e) {\n    let lat = e.latitude;\n    let lon = e.longitude;\n    var radius = e.accuracy;\n    (async () => {\n      const address = await convertLatLon(lat, lon);\n      const submitText = $('form :submit').first().text();\n      console.log($('form :submit').first().parent());\n      $('form :submit').first().html(`${submitText}`);\n\n      if (address.features[0]) {\n        $('input').first().val(address.features[0].place_name);\n      }\n\n      await fetchWeather(lat, lon);\n    })().catch(err => {\n      console.error(err);\n    });\n    locationControl.stop(); // map.stopLocate();\n  });\n  map.on('locationerror', function () {\n    alert('Position could not be found');\n  });\n\n  const coordinatesGeocoder = function (query) {\n    // Match anything which looks like\n    // decimal degrees coordinate pair.\n    const matches = query.match(/^[ ]*(?:Lat: )?(-?\\d+\\.?\\d*)[, ]+(?:Lng: )?(-?\\d+\\.?\\d*)[ ]*$/i);\n\n    if (!matches) {\n      return null;\n    }\n\n    function coordinateFeature(lng, lat) {\n      return {\n        center: [lng, lat],\n        geometry: {\n          type: 'Point',\n          coordinates: [lng, lat]\n        },\n        place_name: 'Lat: ' + lat + ' Lng: ' + lng,\n        place_type: ['coordinate'],\n        properties: {},\n        type: 'Feature'\n      };\n    }\n\n    const coord1 = Number(matches[1]);\n    const coord2 = Number(matches[2]);\n    const geocodes = [];\n\n    if (coord1 < -90 || coord1 > 90) {\n      // must be lng, lat\n      geocodes.push(coordinateFeature(coord1, coord2));\n    }\n\n    if (coord2 < -90 || coord2 > 90) {\n      // must be lat, lng\n      geocodes.push(coordinateFeature(coord2, coord1));\n    }\n\n    if (geocodes.length === 0) {\n      // else could be either lng, lat or lat, lng\n      geocodes.push(coordinateFeature(coord1, coord2));\n      geocodes.push(coordinateFeature(coord2, coord1));\n    }\n\n    return geocodes;\n  };\n\n  const results = document.getElementById('destinationResult');\n  const originResult = document.getElementById('originResult'); // Clear results container when search is cleared.\n  // 83.653482  -71.383935\n\n  async function convertAddress(city) {\n    const query = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${city}.json?types=neighborhood,address,place&access_token=pk.eyJ1IjoibG9nYW41MjAxIiwiYSI6ImNrcTQybTFoZzE0aDQyeXM1aGNmYnR1MnoifQ.4kRWNfEH_Yao_mmdgrgjPA`, {\n      method: 'GET'\n    });\n\n    if (query.status !== 200) {\n      alert(query.status);\n      return;\n    }\n\n    const data = await query.json();\n    return data;\n  }\n\n  async function fetchWeather(lat, lon) {\n    const query = await fetch(`http://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=imperial&appid&appid=6185638fa6045f2f694129e53175d997`, {\n      method: 'GET'\n    });\n\n    if (query.status !== 200) {\n      return;\n    }\n\n    map.fitBounds([[lat, lon]], {\n      padding: [100, 100]\n    });\n    const data = await query.json();\n    const imgIcon = data.weather[0].icon;\n    const currentWeather = data.weather[0].main;\n    const temp = data.main.temp;\n    $('#latInputField').val(lat);\n    $('#lonInputField').val(lon);\n    var popup = L.popup({\n      autoPan: true,\n      keepInView: true\n    }).setContent(`<div class=\"row\" >\n    <div class=\"col\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">${currentWeather}</h5>\n          <p class=\"card-text\">\n\n            <span>   <img style=\"max-width: 50px\" src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\" class=\"img-fluid rounded-start\" alt=\"...\"></span>\n\n            <span>\n              ${temp}°F </span>\n\n          </p>\n\n        </div>\n      </div>\n    </div>\n    </div>`);\n    marker.setLatLng([lat, lon]).bindPopup(popup).openPopup();\n    var alertPlaceholder = document.querySelector('.weather-alert-placeholder');\n\n    function postLog(icon, weather, temperature) {\n      let wrapper = document.createElement('div');\n      wrapper.innerHTML = ` <div\n        class=\"alert alert-light d-flex align-items-center\"\n        role=\"alert\"\n        >\n        <img\n          style=\"max-width: 50px\"\n          src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n          alt=\"\"\n          srcset=\"\"\n        />\n        ${currentWeather} and ${temp}°F\n        </div>`;\n      alertPlaceholder.append(wrapper);\n    }\n\n    if (alertPlaceholder.childElementCount == 0) {\n      postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n    } else if (alertPlaceholder.childElementCount == 1) {\n      postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n    } else if (alertPlaceholder.childElementCount == 2) {\n      $('#liveAlertPlaceholder').empty();\n      setTimeout(() => {\n        postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n      }, 200);\n    }\n\n    if ($('#output-field-input').hasClass('is-invalid')) {\n      $('#output-field-input').removeClass('is-invalid');\n    }\n  }\n\n  $('#findWeatherForm').on('submit', async function (e) {\n    e.preventDefault();\n    let inputs = e.currentTarget.elements;\n    const result = await convertAddress($(this).find('input:eq(0)').val()); //\n\n    if (result.features[0]) {\n      if ($('.alert-warning').hasClass('visible')) {\n        $('.alert-warning').removeClass('visible').addClass('invisible');\n      }\n\n      let coords = result.features[0].center;\n      let lat = coords[1];\n      let lon = coords[0];\n      await fetchWeather(lat, lon);\n    } else {\n      $('.alert-warning').removeClass('invisible').addClass('visible');\n    }\n    /*\n    for (i = 0; i < inputs.length; i++) {\n      if (inputs[i].nodeName === \"INPUT\" && inputs[i].type === \"search\") {\n        // Update text input\n        const result = await convertAddress(inputs[i].value);\n        if (result.features[0]) {\n          let coords = result.features[0].center;\n           let lat = coords[1];\n          let lon = coords[0];\n           CoordsApp.state.origin = coords;\n           await fetchWeather(lat, lon);\n        } else if (!result.features[0]) {\n          alert(\"no address found\");\n        }\n      }\n    } */\n\n  });\n\n  async function convertLatLon(lat, lon) {\n    const query = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${lon},${lat}.json?types=neighborhood,address,place&access_token=pk.eyJ1IjoibG9nYW41MjAxIiwiYSI6ImNrcTQybTFoZzE0aDQyeXM1aGNmYnR1MnoifQ.4kRWNfEH_Yao_mmdgrgjPA`, {\n      method: 'GET'\n    });\n\n    if (query.status !== 200) {\n      return;\n    }\n\n    const data = await query.json();\n\n    if (data.features.length == 0) {\n      $('.alert-warning').removeClass('invisible').addClass('visible');\n    } else if (data.features.length > 0 && $('.alert-warning').hasClass('visible')) {\n      $('.alert-warning').removeClass('visible').addClass('invisible');\n    }\n\n    return data;\n  }\n\n  $('#findWeatherAddressForm').on('submit', async function (e) {\n    e.preventDefault();\n    const submitText = $('form :submit').first().text();\n    console.log($('form :submit').first().parent());\n    $('form :submit').first().html(` <span class=\"spinner-grow spinner-grow-sm\" role=\"status\" aria-hidden=\"true\"></span>\n  ${submitText}`);\n    const query = encodeURI(e.currentTarget[0].value);\n    const latLon = await convertAddress(query);\n    let lat = latLon.features[0].center[1];\n    let lon = latLon.features[0].center[0];\n    $('#latInputField').val(lat);\n    $('#lonInputField').val(lon);\n    map.fitBounds([[lat, lon]], {\n      padding: [100, 100]\n    });\n    $('form :submit').first().html(submitText);\n    const weather = await latLonWeather(lat, lon);\n    const imgIcon = weather.weather[0].icon;\n    const currentWeather = weather.weather[0].main;\n    const temp = weather.main.temp;\n    var popup = L.popup({\n      autoPan: true,\n      keepInView: true\n    }).setContent(`<div class=\"row\" >\n    <div class=\"col\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">${currentWeather}</h5>\n          <p class=\"card-text\">\n\n            <span>   <img style=\"max-width: 50px\" src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\" class=\"img-fluid rounded-start\" alt=\"...\"></span>\n\n            <span>\n              ${temp}°F </span>\n\n          </p>\n\n        </div>\n      </div>\n    </div>\n  </div>`);\n    marker.setLatLng([lat, lon]).bindPopup(popup).openPopup();\n    var alertPlaceholder = document.querySelector('.weather-alert-placeholder');\n\n    function postLog(icon, weather, temperature) {\n      let wrapper = document.createElement('div');\n      wrapper.innerHTML = ` <div\n        class=\"alert alert-light d-flex align-items-center\"\n        role=\"alert\"\n        >\n        <img\n          style=\"max-width: 50px\"\n          src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n          alt=\"\"\n          srcset=\"\"\n        />\n        ${currentWeather} and ${temp}°F\n        </div>`;\n      alertPlaceholder.append(wrapper);\n    }\n\n    if (alertPlaceholder.childElementCount == 0) {\n      postLog(` <img\nstyle=\"max-width: 50px\"\nsrc=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\nalt=\"\"\nsrcset=\"\"\n/>\n${currentWeather} and ${temp}°F`);\n    } else if (alertPlaceholder.childElementCount == 1) {\n      postLog(` <img\nstyle=\"max-width: 50px\"\nsrc=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\nalt=\"\"\nsrcset=\"\"\n/>\n${currentWeather} and ${temp}°F`);\n    } else if (alertPlaceholder.childElementCount == 2) {\n      $('#liveAlertPlaceholder').empty();\n      setTimeout(() => {\n        postLog(` <img\n  style=\"max-width: 50px\"\n  src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n  alt=\"\"\n  srcset=\"\"\n/>\n${currentWeather} and ${temp}°F`);\n      }, 200);\n    }\n  });\n  $('#latlonForm').on('submit', async function (e) {\n    e.preventDefault();\n    let lat = e.currentTarget[0].value;\n    let lon = e.currentTarget[1].value;\n    const coords = await convertLatLon(lat, lon);\n    await fetchWeather(lat, lon);\n\n    if (coords.features.length == 0) {\n      $('.target-address').val('');\n    } else if (coords.features.length > 0) {\n      $('.target-address').val(coords.features[0].place_name);\n    }\n    /*\n    setTimeout(() => {\n      const alertMessage = `\n      <div class=\"alert alert-primary d-flex align-items-center\" role=\"alert\">\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" fill=\"currentColor\" class=\"bi bi-exclamation-triangle-fill flex-shrink-0 me-2\" viewBox=\"0 0 16 16\" role=\"img\" aria-label=\"Warning:\">\n      <path d=\"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"/>\n      </svg>\n      <div>\n      No Address Found\n      </div>\n      </div>\n       `;\n       let address =\n        coords.features.length > 0 ? coords.features[0].place_name : \"\";\n       $(\"input\")\n        .first()\n        .val(address);\n       let alertHtml = coords.features.length > 0 ? \"\" : alertMessage;\n      $(\".alerts\").html(alertHtml);\n       var popup = L.popup({ autoPan: true, keepInView: true })\n        .setContent(`<div class=\"row\" >\n    <div class=\"col\">\n      <div class=\"card\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">${currentWeather}</h5>\n          <p class=\"card-text\">\n             <span>   <img style=\"max-width: 50px\" src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\" class=\"img-fluid rounded-start\" alt=\"...\"></span>\n             <span>\n              ${temp}°F </span>\n           </p>\n         </div>\n      </div>\n    </div>\n    </div>`);\n       marker\n        .setLatLng([lat, lon])\n        .bindPopup(popup)\n        .openPopup();\n      var alertPlaceholder = document.querySelector(\n        \".weather-alert-placeholder\"\n      );\n       function postLog(icon, weather, temperature) {\n        let wrapper = document.createElement(\"div\");\n        wrapper.innerHTML = ` <div\n          class=\"alert alert-light d-flex align-items-center\"\n          role=\"alert\"\n          >\n          <img\n            style=\"max-width: 50px\"\n            src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n            alt=\"\"\n            srcset=\"\"\n          />\n          ${currentWeather} and ${temp}°F\n          </div>`;\n         alertPlaceholder.append(wrapper);\n      }\n       if (alertPlaceholder.childElementCount == 0) {\n        postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n      } else if (alertPlaceholder.childElementCount == 1) {\n        postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n      } else if (alertPlaceholder.childElementCount == 2) {\n        $(\"#liveAlertPlaceholder\").empty();\n        setTimeout(() => {\n          postLog(` <img\n    style=\"max-width: 50px\"\n    src=\"http://openweathermap.org/img/wn/${imgIcon}@2x.png\"\n    alt=\"\"\n    srcset=\"\"\n    />\n    ${currentWeather} and ${temp}°F`);\n        }, 200);\n      }\n    }, 500);\n    */\n\n  });\n\n  function addRoute() {\n    App.state.count++;\n    const origin = CoordsApp.state.origin;\n    const destination = CoordsApp.state.destination; // map.flyTo([centerLat, centerLon])\n\n    /* map.panInsideBounds([\n         [origin[1] , origin[0] ], // southwestern corner of the bounds\n         [destination[1] , destination[0], {padding: [50,50]} ] // northeastern corner of the bounds\n       ]);\n       //\n       geojson.features[0].geometry.coordinates = [origin[0], origin[1]];\n      geojson.features[1].geometry.coordinates = [destination[0], destination[1]]\n    */\n    //\n\n    let latD = destination[1];\n    let lonD = destination[0];\n    let latO = origin[1];\n    let lonO = origin[0];\n    geojson.features[0].geometry.coordinates = [lonO, latO];\n    geojson.features[1].geometry.coordinates = [lonD, latD]; //\n\n    featureLayer.setGeoJSON(geojson).addTo(map); // featureLayer.setGeoJSON(geojson).addTo(map);\n\n    /*\n      map.fitBounds(featureLayer.getBounds(), {\n    padding: [50,50]\n       });\n      map.zoomOut()\n    */\n\n    let latOrigin = origin[1];\n    let lonOrigin = origin[0];\n    let latDest = destination[1];\n    let lonDest = destination[0]; //\n\n    map.fitBounds([[latOrigin, lonOrigin], [latDest, lonDest]], {\n      padding: [50, 50]\n    });\n  }\n\n  function addNewRoute() {\n    const origin = CoordsApp.state.origin;\n    const destination = CoordsApp.state.destination;\n    let latD = destination[1];\n    let lonD = destination[0];\n    let latO = origin[1];\n    let lonO = origin[0];\n    geojson.features[0].geometry.coordinates = [lonO, latO];\n    geojson.features[1].geometry.coordinates = [lonD, latD];\n    featureLayer.setGeoJSON(geojson); // A simple line from origin to destination.\n    // A single point that animates along the route.\n    // Coordinates are initially set to origin.\n    // Calculate the distance in kilometers between route start/end point.\n    // animate(counter);\n\n    featureLayer.setGeoJSON(geojson);\n    let latOrigin = origin[1];\n    let lonOrigin = origin[0];\n    let latDest = destination[1];\n    let lonDest = destination[0]; //\n\n    map.fitBounds([[latOrigin, lonOrigin], [latDest, lonDest]], {\n      padding: [50, 50]\n    });\n  }\n\n  function format(time) {\n    // Hours, minutes and seconds\n    var hrs = ~~(time / 3600);\n    var mins = ~~(time % 3600 / 60);\n    let result = {\n      hours: hrs,\n      minutes: mins\n    }; // Output like \"1:01\" or \"4:03:59\" or \"123:03:59\"\n\n    return result;\n  }\n\n  function callMatrix(first, second) {\n    fetch(`https://api.mapbox.com/directions-matrix/v1/mapbox/driving/${first};${second}?&access_token=pk.eyJ1IjoibG9nYW41MjAxIiwiYSI6ImNrcTQycnlhMDBlb2kydXBwZHoyOGNsY3EifQ.E8N4lPy6tiI0xY3nor3MTg`).then(response => response.json()).then(json => {\n      const durations = json.durations[0];\n      const travelTime = durations[1];\n      const result = format(travelTime); // //\n\n      var alertPlaceholder = document.getElementById('liveAlertPlaceholder');\n      var alertTrigger = document.getElementById('liveAlertBtn');\n\n      function postLog(message) {\n        var wrapper = document.createElement('div');\n        wrapper.innerHTML = `\n    <div class=\"alert alert-secondary d-flex align-items-center justify-content-between\" role=\"alert\">\n     <div class=\"alertMessage\">\n       ${message}\n     </div>\n\n\n   </div>`;\n        alertPlaceholder.append(wrapper);\n      }\n\n      if (alertPlaceholder.childElementCount == 0) {\n        postLog(`${result.hours} hour(s) and ${result.minutes} minutes`);\n      } else if (alertPlaceholder.childElementCount == 1) {\n        postLog(`${result.hours} hour(s) and ${result.minutes} minutes`);\n      } else if (alertPlaceholder.childElementCount == 2) {\n        $('#liveAlertPlaceholder').empty();\n        setTimeout(() => {\n          postLog(`${result.hours} hour(s) and ${result.minutes}`);\n        }, 200);\n      }\n    });\n  }\n\n  function getUserLocation() {\n    if ('geolocation' in navigator) {\n      function success(position) {\n        let lat = position.coords.latitude;\n        let lon = position.coords.longitude; //\n\n        map.flyTo([lat, lon], 11);\n        geojson.features[0].geometry.coordinates = [lon, lat]; //\n\n        featureLayer.setGeoJSON(geojson).addTo(map);\n        CoordsApp.state.userLocation = [lon, lat]; // alert(lat)\n      }\n\n      function error(err) {\n        console.warn(`ERROR(${err.code}): ${err.message}`);\n      }\n\n      var options = {\n        enableHighAccuracy: true,\n        timeout: 5000,\n        maximumAge: 0\n      };\n      navigator.geolocation.getCurrentPosition(success, error, options);\n    } else {/// /\n    }\n  } // getUserLocation();\n\n\n  const title = $('title').html();\n  const pageTitle = title.slice(11);\n  let bookmarkControl = new L.Control.Bookmarks({\n    name: pageTitle\n  }).addTo(map);\n});\n\n//# sourceURL=webpack:///./src/js/weather.js?")},5:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return toggleModal; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return getDate; });\n/* harmony import */ var bootstrap_dist_js_bootstrap_esm_min_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7);\n\nlet filterCommentSuccess = new bootstrap_dist_js_bootstrap_esm_min_js__WEBPACK_IMPORTED_MODULE_0__[/* Modal */ \"b\"](document.getElementById('filterCommentSuccess'), {\n  keyboard: false\n});\nlet filterCommentFail = new bootstrap_dist_js_bootstrap_esm_min_js__WEBPACK_IMPORTED_MODULE_0__[/* Modal */ \"b\"](document.getElementById('filterCommentFail'), {\n  keyboard: false\n});\nfunction toggleModal(id) {\n  const modal = id == \"success\" ? filterCommentSuccess.toggle() : filterCommentFail.toggle();\n  return modal;\n}\n\nDate.prototype.toShortFormat = function () {\n  let monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n  let day = this.getDate();\n  let monthIndex = this.getMonth();\n  let monthName = monthNames[monthIndex];\n  let year = this.getFullYear();\n  return `${monthName} ${year}`;\n};\n\nfunction getDate() {\n  let today = new Date();\n  const prettyDate = today.toShortFormat();\n  return prettyDate;\n}\n/* unused harmony default export */ var _unused_webpack_default_export = ({\n  getDate,\n  toggleModal\n});\n\n//# sourceURL=webpack:///./src/js/utils/helpers.js?")},9:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "addCommentMessage", function() { return addCommentMessage; });\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(10);\n/* harmony import */ var firebase_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var utils_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);\n/* harmony import */ var firebase_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(14);\n/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var firebase_functions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3);\n/* harmony import */ var utils_comments__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4);\n/* harmony import */ var bootstrap_dist_js_bootstrap_esm_min_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7);\n\n\n\n\n\n\n\n\nconst firebaseConfig = {\n  apiKey: "AIzaSyBCU8RRxV3qaSyxOgc4ObSWmUhlfnJsYTo",\n  authDomain: "geotools-bc75a.firebaseapp.com",\n  databaseURL: "https://geotools-bc75a-default-rtdb.firebaseio.com",\n  projectId: "geotools-bc75a",\n  storageBucket: "geotools-bc75a.appspot.com",\n  messagingSenderId: "106157954659",\n  appId: "1:106157954659:web:3e189110236a2138438a56",\n  measurementId: "G-Z6GK19K3L0"\n}; // Initialize Firebase\n\nconst app = Object(firebase_app__WEBPACK_IMPORTED_MODULE_0__[/* initializeApp */ "a"])(firebaseConfig);\nconst auth = Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* getAuth */ "c"])();\nconst db = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* getDatabase */ "b"])();\nconst functions = Object(firebase_functions__WEBPACK_IMPORTED_MODULE_5__[/* getFunctions */ "b"])(app);\n\nif (location.hostname === "localhost") {\n  Object(firebase_functions__WEBPACK_IMPORTED_MODULE_5__[/* connectFunctionsEmulator */ "a"])(functions, "localhost", 5001);\n  Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* connectAuthEmulator */ "b"])(auth, \'http://localhost:9099\');\n}\n\nconst path = window.location.pathname;\nconst commentRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}`);\nconst commentFormInputs = $("#comment-form :input");\nconst googleProvider = new firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* GoogleAuthProvider */ "a"]();\nObject(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* onAuthStateChanged */ "d"])(auth, user => {\n  const userData = localStorage.getItem("userData");\n\n  if (user) {\n    if (window.location.href.includes("login")) {\n      console.log("login", window.location);\n      console.log(user);\n      let history = localStorage.getItem("page-history") || "/";\n      window.location.replace(history);\n    }\n  }\n});\n\nfunction loginNav() {\n  console.log(\'login nav user login\');\n}\n\nfunction logoutNav() {\n  console.log(\'login nav user already logged in\');\n}\n\nfunction writeUserData(userId, userInfo) {\n  return Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, "users"), userInfo);\n}\n\nasync function getIp() {\n  const query = await fetch(`https://ipapi.co/json`, {\n    method: "GET"\n  });\n\n  if (query.status !== 200) {\n    alert(query.status);\n    return;\n  }\n\n  const data = await query.json();\n  return data;\n}\n\nfunction googleSignin() {\n  Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* signInWithRedirect */ "f"])(auth, googleProvider);\n}\n\nfunction googleSignOut() {\n  Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* signOut */ "g"])(auth);\n}\n\nfunction checkIfUserExists(data) {\n  const uid = data.uid;\n  const userRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `users`);\n  const users = [];\n  return Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* get */ "a"])(userRef).then(snapshot => {\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const map = new Map(Object.entries(data));\n      const values = Array.from(map.values());\n      console.log(values);\n\n      for (let index = 0; index < values.length; index++) {\n        const element = values[index];\n        console.log(index, element.id);\n\n        if (element.id == uid) {\n          console.log("user already exists");\n          break;\n        } else {\n          console.log("user does not exist");\n        }\n      }\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nfunction checkIfAnonymousUserExists() {\n  const userRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `anonymousUsers`);\n  Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* get */ "a"])(userRef).then(snapshot => {\n    if (snapshot.exists()) {\n      const data = snapshot.val();\n      const map = new Map(Object.entries(data));\n\n      for (const [key, value] of map.entries()) {\n        console.log(key, value);\n      }\n    }\n  }).catch(error => {\n    console.error(error);\n  });\n}\n\nasync function writeUsertoDatabase(data) {\n  Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* get */ "a"])(db, `users/${data.uid}`).then(snapshot => {\n    if (snapshot.exists()) {\n      console.log(snapshot.val());\n    } else {\n      const userListRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `users/${data.uid}`);\n      const newPostRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* push */ "e"])(userListRef);\n      return Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(newPostRef, data);\n    }\n  }).catch(error => {\n    console.error(error);\n    return error;\n  }).finally(() => {\n    let msg = "Promise complete";\n    console.log(\'Promise completed\');\n    return msg;\n  });\n}\n\nasync function createRandomUser() {\n  const ipAddress = await getIp();\n  return Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* signInAnonymously */ "e"])(auth).then(data => {\n    let ip = ipAddress || null;\n    let userInfo = {\n      uid: data.user.uid,\n      emailVerified: data.user.emailVerified,\n      isAnonymous: data.user.isAnonymous,\n      metadata: data.user.metadata,\n      ip: ip\n    };\n    let userData = JSON.stringify(userInfo);\n    localStorage.setItem("userData", userData);\n    console.log(userInfo);\n    return userInfo;\n  }).catch(error => {\n    const errorCode = error.code;\n    const errorMessage = error.message;\n    return error;\n  });\n}\n\nasync function handleComment(message, name, userData, path) {\n  const addComment = Object(firebase_functions__WEBPACK_IMPORTED_MODULE_5__[/* httpsCallable */ "c"])(functions, "addComment");\n  const prettyDate = Object(utils_helpers__WEBPACK_IMPORTED_MODULE_2__[/* getDate */ "a"])();\n  addComment({\n    text: message,\n    name: name,\n    uid: userData,\n    page: path\n  }).then(function (result) {\n    // Read result of the Cloud Function.\n    let sanitizedMessage = result.data.text;\n    let sanitizedName = result.data.name;\n    const documentId = result.data.id;\n\n    if (message !== sanitizedMessage) {\n      Object(utils_helpers__WEBPACK_IMPORTED_MODULE_2__[/* toggleModal */ "b"])("fail");\n      $("#comment-btn").disabled = false;\n      $("#comment-btn").html("Submit");\n\n      for (let index = 0; index < commentFormInputs.length; index++) {\n        const element = commentFormInputs[index];\n        element.value = "";\n      }\n    } else {\n      const newCommentData = {\n        id: documentId,\n        name: sanitizedName,\n        date: prettyDate,\n        message: sanitizedMessage\n      };\n      const newComment = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* push */ "e"])(commentRef);\n      Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(newComment, newCommentData);\n      $("#comment-btn").disabled = false;\n      $("#comment-btn").html("Submit");\n\n      for (let index = 0; index < commentFormInputs.length; index++) {\n        const element = commentFormInputs[index];\n        element.value = "";\n      }\n\n      let commentComponent = Object(utils_comments__WEBPACK_IMPORTED_MODULE_6__[/* comment */ "a"])(documentId, sanitizedName, prettyDate, sanitizedMessage, "", "");\n      Object(utils_helpers__WEBPACK_IMPORTED_MODULE_2__[/* toggleModal */ "b"])("success");\n      $("#comment-section").append(commentComponent);\n      $("#comment-btn").disabled = false;\n    }\n  }).catch(function (error) {\n    // Getting the Error details.\n    let code = error.code;\n    let message = error.message;\n    let details = error.details;\n    console.error("There was an error when calling the Cloud Function", error);\n    window.alert("There was an error when calling the Cloud Function:\\n\\nError Code: " + code + "\\nError Message:" + message + "\\nError Details:" + details);\n    addCommentButton.disabled = false;\n  });\n}\n\nfunction getUser() {\n  let result = auth.currentUser ? auth.currentUser : null;\n  return result;\n}\n\n$("#login-link-icon").on("click", function (e) {\n  e.preventDefault();\n  localStorage.setItem("page-history", window.location.href);\n  window.location.replace("/login");\n});\nsetTimeout(() => {\n  if ($("#mainNav")) {\n    if (auth.currentUser) {\n      console.log(auth.currentUser.uid);\n      let logoutNav = `    <div class="nav-item dropdown">\n          <a\n            class="nav-link dropdown-toggle"\n            href="#"\n            id="login-link-icon"\n            role="button"\n            data-bs-toggle="dropdown"\n            aria-expanded="false"\n          >\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\n              \x3c!-- Font Awesome Pro 5.15.4 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) --\x3e\n              <path\n                d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"\n              /></svg\n          ></a>\n          <ul class="dropdown-menu" aria-labelledby="login-link-icon">\n            <li><a class="dropdown-item" href="#">New project...</a></li>\n            <li><a class="dropdown-item" href="#">Settings</a></li>\n            <li><a class="dropdown-item" href="#">Profile</a></li>\n            <li>\n              <hr class="dropdown-divider" />\n            </li>\n            <li>\n              <a id="sign-out" class="dropdown-item" href="#">Sign out</a>\n            </li>\n          </ul>\n        </div>`;\n      $("#user-profile").html(logoutNav);\n    } else {\n      console.log("no user timed");\n    }\n  }\n}, 1000);\nfunction addCommentMessage(cleanMessage, cleanName) {\n  const path = window.location.pathname;\n  const addComment = Object(firebase_functions__WEBPACK_IMPORTED_MODULE_5__[/* httpsCallable */ "c"])(functions, "addComment");\n  const userData = JSON.parse(localStorage.getItem("userData"));\n  const uid = userData.uid;\n  addComment({\n    text: cleanMessage,\n    name: cleanName,\n    uid: userData,\n    page: path\n  }).then(function (result) {\n    console.log(result); // Read result of the Cloud Function.\n\n    let sanitizedMessage = result.data.text;\n    let sanitizedName = result.data.name;\n\n    if (cleanMessage !== sanitizedMessage) {\n      filterCommentFail.toggle();\n      $("#reply-btn").disabled = false;\n      $("#reply-btn").html("Send");\n\n      for (let index = 0; index < formElements.length; index++) {\n        const element = formElements[index];\n        element.value = "";\n      }\n    } else {\n      console.log("test");\n      Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* get */ "a"])(commentRef).then(snapshot => {\n        if (snapshot.exists()) {\n          const data = snapshot.val();\n          const map = new Map(Object.entries(data));\n\n          for (const [key, value] of map.entries()) {\n            if (value.id == docId) {\n              const postListRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* ref */ "f"])(db, `messages${path}${key}/replies`);\n              const newPostRef = Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* push */ "e"])(postListRef);\n              return Object(firebase_database__WEBPACK_IMPORTED_MODULE_1__[/* set */ "g"])(newPostRef, {\n                name: sanitizedName,\n                id: uid,\n                message: sanitizedMessage,\n                date: prettyDate,\n                recipient: value.id\n              });\n            }\n          }\n        } else {}\n      }).catch(error => {\n        console.error(error);\n      });\n      setTimeout(() => {\n        $(utils_comments__WEBPACK_IMPORTED_MODULE_6__[/* replyForm */ "d"]).animate({\n          opacity: 0\n        }, function () {\n          $(utils_comments__WEBPACK_IMPORTED_MODULE_6__[/* replyForm */ "d"]).css("display", "none");\n          $(otherSiblings).removeClass("d-none");\n          $(otherSiblings).append(`\n       <div class="col-md-11 p-3 mb-3" >\n   <div class="row ">\n   <div class="col-lg-12 border-start">\n      <div class="d-flex justify-content-between align-items-center border-bottom pb-2">\n     <h6 class="fw-bold text-primary mb-1 ">${cleanName}</h6>\n     <p class="text-muted small m-0">\n      ${prettyDate}\n     </p>\n\n\n     </div>\n     <p class="mt-3 mb-0 pb-2">\n     ${cleanMessage}\n     </p>\n   </div>\n   </div>\n\n     </div>\n     `);\n          $(otherComments).animate({\n            opacity: 1\n          }, 500);\n          filterCommentSuccess.toggle();\n        });\n      }, 500);\n    }\n  }).catch(function (error) {\n    // Getting the Error details.\n    let code = error.code;\n    let message = error.message;\n    let details = error.details;\n    console.error("There was an error when calling the Cloud Function", error);\n    window.alert("There was an error when calling the Cloud Function:\\n\\nError Code: " + code + "\\nError Message:" + message + "\\nError Details:" + details);\n    addCommentButton.disabled = false;\n  });\n}\n$("#user-profile").on("click", "#sign-out", function (e) {\n  e.preventDefault();\n  console.log(e);\n  Object(firebase_auth__WEBPACK_IMPORTED_MODULE_3__[/* signOut */ "g"])(auth).then(() => {\n    let myModal = new bootstrap_dist_js_bootstrap_esm_min_js__WEBPACK_IMPORTED_MODULE_7__[/* Modal */ "b"](document.getElementById("modalSignOut"));\n    myModal.toggle();\n  }).catch(error => {});\n});\n/* harmony default export */ __webpack_exports__["default"] = ({\n  addCommentMessage\n});\n\n//# sourceURL=webpack:///./src/js/firebase.js?')}});